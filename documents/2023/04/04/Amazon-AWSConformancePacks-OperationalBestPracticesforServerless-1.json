{
  "AttachmentsContent": [],
  "Content": "{\n  \"description\" : \"Operational Best Practices for Serverless\",\n  \"schemaVersion\" : \"1.0\",\n  \"templateBody\" : {\n    \"Conditions\" : {\n      \"dynamodbThroughputLimitCheckParamAccountRCUThresholdPercentage\" : {\n        \"Fn::Not\" : [ {\n          \"Fn::Equals\" : [ \"\", {\n            \"Ref\" : \"DynamodbThroughputLimitCheckParamAccountRCUThresholdPercentage\"\n          } ]\n        } ]\n      },\n      \"dynamodbThroughputLimitCheckParamAccountWCUThresholdPercentage\" : {\n        \"Fn::Not\" : [ {\n          \"Fn::Equals\" : [ \"\", {\n            \"Ref\" : \"DynamodbThroughputLimitCheckParamAccountWCUThresholdPercentage\"\n          } ]\n        } ]\n      },\n      \"lambdaConcurrencyCheckParamConcurrencyLimitHigh\" : {\n        \"Fn::Not\" : [ {\n          \"Fn::Equals\" : [ \"\", {\n            \"Ref\" : \"LambdaConcurrencyCheckParamConcurrencyLimitHigh\"\n          } ]\n        } ]\n      },\n      \"lambdaConcurrencyCheckParamConcurrencyLimitLow\" : {\n        \"Fn::Not\" : [ {\n          \"Fn::Equals\" : [ \"\", {\n            \"Ref\" : \"LambdaConcurrencyCheckParamConcurrencyLimitLow\"\n          } ]\n        } ]\n      },\n      \"serviceVpcEndpointEnabled2ParamServiceName\" : {\n        \"Fn::Not\" : [ {\n          \"Fn::Equals\" : [ \"\", {\n            \"Ref\" : \"ServiceVpcEndpointEnabled2ParamServiceName\"\n          } ]\n        } ]\n      },\n      \"serviceVpcEndpointEnabledParamServiceName\" : {\n        \"Fn::Not\" : [ {\n          \"Fn::Equals\" : [ \"\", {\n            \"Ref\" : \"ServiceVpcEndpointEnabledParamServiceName\"\n          } ]\n        } ]\n      }\n    },\n    \"Parameters\" : {\n      \"DynamodbThroughputLimitCheckParamAccountRCUThresholdPercentage\" : {\n        \"Default\" : \"80\",\n        \"Type\" : \"String\"\n      },\n      \"DynamodbThroughputLimitCheckParamAccountWCUThresholdPercentage\" : {\n        \"Default\" : \"80\",\n        \"Type\" : \"String\"\n      },\n      \"LambdaConcurrencyCheckParamConcurrencyLimitHigh\" : {\n        \"Default\" : \"1000\",\n        \"Type\" : \"String\"\n      },\n      \"LambdaConcurrencyCheckParamConcurrencyLimitLow\" : {\n        \"Default\" : \"500\",\n        \"Type\" : \"String\"\n      },\n      \"ServiceVpcEndpointEnabled2ParamServiceName\" : {\n        \"Default\" : \"lambda\",\n        \"Type\" : \"String\"\n      },\n      \"ServiceVpcEndpointEnabledParamServiceName\" : {\n        \"Default\" : \"execute-api\",\n        \"Type\" : \"String\"\n      }\n    },\n    \"Resources\" : {\n      \"ApiGwAssociatedWithWaf\" : {\n        \"Properties\" : {\n          \"ConfigRuleName\" : \"api-gw-associated-with-waf\",\n          \"Scope\" : {\n            \"ComplianceResourceTypes\" : [ \"AWS::ApiGateway::Stage\" ]\n          },\n          \"Source\" : {\n            \"Owner\" : \"AWS\",\n            \"SourceIdentifier\" : \"API_GW_ASSOCIATED_WITH_WAF\"\n          }\n        },\n        \"Type\" : \"AWS::Config::ConfigRule\"\n      },\n      \"ApiGwCacheEnabledAndEncrypted\" : {\n        \"Properties\" : {\n          \"ConfigRuleName\" : \"api-gw-cache-enabled-and-encrypted\",\n          \"Scope\" : {\n            \"ComplianceResourceTypes\" : [ \"AWS::ApiGateway::Stage\" ]\n          },\n          \"Source\" : {\n            \"Owner\" : \"AWS\",\n            \"SourceIdentifier\" : \"API_GW_CACHE_ENABLED_AND_ENCRYPTED\"\n          }\n        },\n        \"Type\" : \"AWS::Config::ConfigRule\"\n      },\n      \"ApiGwExecutionLoggingEnabled\" : {\n        \"Properties\" : {\n          \"ConfigRuleName\" : \"api-gw-execution-logging-enabled\",\n          \"Scope\" : {\n            \"ComplianceResourceTypes\" : [ \"AWS::ApiGateway::Stage\", \"AWS::ApiGatewayV2::Stage\" ]\n          },\n          \"Source\" : {\n            \"Owner\" : \"AWS\",\n            \"SourceIdentifier\" : \"API_GW_EXECUTION_LOGGING_ENABLED\"\n          }\n        },\n        \"Type\" : \"AWS::Config::ConfigRule\"\n      },\n      \"ApiGwSslEnabled\" : {\n        \"Properties\" : {\n          \"ConfigRuleName\" : \"api-gw-ssl-enabled\",\n          \"Scope\" : {\n            \"ComplianceResourceTypes\" : [ \"AWS::ApiGateway::Stage\" ]\n          },\n          \"Source\" : {\n            \"Owner\" : \"AWS\",\n            \"SourceIdentifier\" : \"API_GW_SSL_ENABLED\"\n          }\n        },\n        \"Type\" : \"AWS::Config::ConfigRule\"\n      },\n      \"ApiGwXrayEnabled\" : {\n        \"Properties\" : {\n          \"ConfigRuleName\" : \"api-gw-xray-enabled\",\n          \"Scope\" : {\n            \"ComplianceResourceTypes\" : [ \"AWS::ApiGateway::Stage\" ]\n          },\n          \"Source\" : {\n            \"Owner\" : \"AWS\",\n            \"SourceIdentifier\" : \"API_GW_XRAY_ENABLED\"\n          }\n        },\n        \"Type\" : \"AWS::Config::ConfigRule\"\n      },\n      \"DynamodbAutoscalingEnabled\" : {\n        \"Properties\" : {\n          \"ConfigRuleName\" : \"dynamodb-autoscaling-enabled\",\n          \"Scope\" : {\n            \"ComplianceResourceTypes\" : [ \"AWS::DynamoDB::Table\" ]\n          },\n          \"Source\" : {\n            \"Owner\" : \"AWS\",\n            \"SourceIdentifier\" : \"DYNAMODB_AUTOSCALING_ENABLED\"\n          }\n        },\n        \"Type\" : \"AWS::Config::ConfigRule\"\n      },\n      \"DynamodbInBackupPlan\" : {\n        \"Properties\" : {\n          \"ConfigRuleName\" : \"dynamodb-in-backup-plan\",\n          \"Source\" : {\n            \"Owner\" : \"AWS\",\n            \"SourceIdentifier\" : \"DYNAMODB_IN_BACKUP_PLAN\"\n          }\n        },\n        \"Type\" : \"AWS::Config::ConfigRule\"\n      },\n      \"DynamodbPitrEnabled\" : {\n        \"Properties\" : {\n          \"ConfigRuleName\" : \"dynamodb-pitr-enabled\",\n          \"Scope\" : {\n            \"ComplianceResourceTypes\" : [ \"AWS::DynamoDB::Table\" ]\n          },\n          \"Source\" : {\n            \"Owner\" : \"AWS\",\n            \"SourceIdentifier\" : \"DYNAMODB_PITR_ENABLED\"\n          }\n        },\n        \"Type\" : \"AWS::Config::ConfigRule\"\n      },\n      \"DynamodbTableEncryptedKms\" : {\n        \"Properties\" : {\n          \"ConfigRuleName\" : \"dynamodb-table-encrypted-kms\",\n          \"Scope\" : {\n            \"ComplianceResourceTypes\" : [ \"AWS::DynamoDB::Table\" ]\n          },\n          \"Source\" : {\n            \"Owner\" : \"AWS\",\n            \"SourceIdentifier\" : \"DYNAMODB_TABLE_ENCRYPTED_KMS\"\n          }\n        },\n        \"Type\" : \"AWS::Config::ConfigRule\"\n      },\n      \"DynamodbThroughputLimitCheck\" : {\n        \"Properties\" : {\n          \"ConfigRuleName\" : \"dynamodb-throughput-limit-check\",\n          \"InputParameters\" : {\n            \"accountRCUThresholdPercentage\" : {\n              \"Fn::If\" : [ \"dynamodbThroughputLimitCheckParamAccountRCUThresholdPercentage\", {\n                \"Ref\" : \"DynamodbThroughputLimitCheckParamAccountRCUThresholdPercentage\"\n              }, {\n                \"Ref\" : \"AWS::NoValue\"\n              } ]\n            },\n            \"accountWCUThresholdPercentage\" : {\n              \"Fn::If\" : [ \"dynamodbThroughputLimitCheckParamAccountWCUThresholdPercentage\", {\n                \"Ref\" : \"DynamodbThroughputLimitCheckParamAccountWCUThresholdPercentage\"\n              }, {\n                \"Ref\" : \"AWS::NoValue\"\n              } ]\n            }\n          },\n          \"Source\" : {\n            \"Owner\" : \"AWS\",\n            \"SourceIdentifier\" : \"DYNAMODB_THROUGHPUT_LIMIT_CHECK\"\n          }\n        },\n        \"Type\" : \"AWS::Config::ConfigRule\"\n      },\n      \"LambdaConcurrencyCheck\" : {\n        \"Properties\" : {\n          \"ConfigRuleName\" : \"lambda-concurrency-check\",\n          \"InputParameters\" : {\n            \"ConcurrencyLimitHigh\" : {\n              \"Fn::If\" : [ \"lambdaConcurrencyCheckParamConcurrencyLimitHigh\", {\n                \"Ref\" : \"LambdaConcurrencyCheckParamConcurrencyLimitHigh\"\n              }, {\n                \"Ref\" : \"AWS::NoValue\"\n              } ]\n            },\n            \"ConcurrencyLimitLow\" : {\n              \"Fn::If\" : [ \"lambdaConcurrencyCheckParamConcurrencyLimitLow\", {\n                \"Ref\" : \"LambdaConcurrencyCheckParamConcurrencyLimitLow\"\n              }, {\n                \"Ref\" : \"AWS::NoValue\"\n              } ]\n            }\n          },\n          \"Scope\" : {\n            \"ComplianceResourceTypes\" : [ \"AWS::Lambda::Function\" ]\n          },\n          \"Source\" : {\n            \"Owner\" : \"AWS\",\n            \"SourceIdentifier\" : \"LAMBDA_CONCURRENCY_CHECK\"\n          }\n        },\n        \"Type\" : \"AWS::Config::ConfigRule\"\n      },\n      \"LambdaDlqCheck\" : {\n        \"Properties\" : {\n          \"ConfigRuleName\" : \"lambda-dlq-check\",\n          \"Scope\" : {\n            \"ComplianceResourceTypes\" : [ \"AWS::Lambda::Function\" ]\n          },\n          \"Source\" : {\n            \"Owner\" : \"AWS\",\n            \"SourceIdentifier\" : \"LAMBDA_DLQ_CHECK\"\n          }\n        },\n        \"Type\" : \"AWS::Config::ConfigRule\"\n      },\n      \"LambdaFunctionPublicAccessProhibited\" : {\n        \"Properties\" : {\n          \"ConfigRuleName\" : \"lambda-function-public-access-prohibited\",\n          \"Scope\" : {\n            \"ComplianceResourceTypes\" : [ \"AWS::Lambda::Function\" ]\n          },\n          \"Source\" : {\n            \"Owner\" : \"AWS\",\n            \"SourceIdentifier\" : \"LAMBDA_FUNCTION_PUBLIC_ACCESS_PROHIBITED\"\n          }\n        },\n        \"Type\" : \"AWS::Config::ConfigRule\"\n      },\n      \"LambdaInsideVpc\" : {\n        \"Properties\" : {\n          \"ConfigRuleName\" : \"lambda-inside-vpc\",\n          \"Scope\" : {\n            \"ComplianceResourceTypes\" : [ \"AWS::Lambda::Function\" ]\n          },\n          \"Source\" : {\n            \"Owner\" : \"AWS\",\n            \"SourceIdentifier\" : \"LAMBDA_INSIDE_VPC\"\n          }\n        },\n        \"Type\" : \"AWS::Config::ConfigRule\"\n      },\n      \"LambdaVpcMultiAzCheck\" : {\n        \"Properties\" : {\n          \"ConfigRuleName\" : \"lambda-vpc-multi-az-check\",\n          \"Scope\" : {\n            \"ComplianceResourceTypes\" : [ \"AWS::Lambda::Function\" ]\n          },\n          \"Source\" : {\n            \"Owner\" : \"AWS\",\n            \"SourceIdentifier\" : \"LAMBDA_VPC_MULTI_AZ_CHECK\"\n          }\n        },\n        \"Type\" : \"AWS::Config::ConfigRule\"\n      },\n      \"ServiceVpcEndpointEnabled\" : {\n        \"Properties\" : {\n          \"ConfigRuleName\" : \"service-vpc-endpoint-enabled\",\n          \"InputParameters\" : {\n            \"serviceName\" : {\n              \"Fn::If\" : [ \"serviceVpcEndpointEnabledParamServiceName\", {\n                \"Ref\" : \"ServiceVpcEndpointEnabledParamServiceName\"\n              }, {\n                \"Ref\" : \"AWS::NoValue\"\n              } ]\n            }\n          },\n          \"Source\" : {\n            \"Owner\" : \"AWS\",\n            \"SourceIdentifier\" : \"SERVICE_VPC_ENDPOINT_ENABLED\"\n          }\n        },\n        \"Type\" : \"AWS::Config::ConfigRule\"\n      },\n      \"ServiceVpcEndpointEnabled2\" : {\n        \"Properties\" : {\n          \"ConfigRuleName\" : \"service-vpc-endpoint-enabled-2\",\n          \"InputParameters\" : {\n            \"serviceName\" : {\n              \"Fn::If\" : [ \"serviceVpcEndpointEnabled2ParamServiceName\", {\n                \"Ref\" : \"ServiceVpcEndpointEnabled2ParamServiceName\"\n              }, {\n                \"Ref\" : \"AWS::NoValue\"\n              } ]\n            }\n          },\n          \"Source\" : {\n            \"Owner\" : \"AWS\",\n            \"SourceIdentifier\" : \"SERVICE_VPC_ENDPOINT_ENABLED\"\n          }\n        },\n        \"Type\" : \"AWS::Config::ConfigRule\"\n      }\n    }\n  }\n}",
  "CreatedDate": "2022-08-25T22:53:07.436Z",
  "DisplayName": null,
  "DocumentFormat": {
    "Value": "JSON"
  },
  "DocumentType": {
    "Value": "ConformancePackTemplate"
  },
  "DocumentVersion": "1",
  "Name": "AWSConformancePacks-OperationalBestPracticesforServerless",
  "Requires": [],
  "ReviewStatus": null,
  "Status": {
    "Value": "Active"
  },
  "StatusInformation": null,
  "VersionName": null,
  "ResponseMetadata": {
    "RequestId": "54d7d489-eceb-4692-90e4-28d3648fa0dc",
    "Metadata": {},
    "ChecksumAlgorithm": 0,
    "ChecksumValidationStatus": 0
  },
  "ContentLength": 12099,
  "HttpStatusCode": 200,
  "LoggedAt": "2023-04-04T07:11:17.1640406+00:00"
}
