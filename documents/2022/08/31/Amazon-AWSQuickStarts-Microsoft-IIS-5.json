{
  "AttachmentsContent": [],
  "Content": "{\n  \"schemaVersion\" : \"1.0\",\n  \"description\" : \"This template deploys IIS in an Auto Scaling group using AWS services such as AWS Systems Managers, Amazon CloudWatch, Amazon Elastic Compute Cloud (EC2) and/or Amazon Elastic Container Service.  The main template deploys Active Directory and a scalable VPC. The workload template deploys into an existing Active Directory (AD) and VPC environment. **WARNING** This template creates Amazon EC2 Windows instances, ECS containers and related resources. You will be billed for the AWS resources used if you create a stack from this template. (qs-1r91fg4hu)\",\n  \"templateBody\" : {\n    \"AWSTemplateFormatVersion\" : \"2010-09-09\",\n    \"Description\" : \"This template deploys IIS in an Auto Scaling group using AWS services such as AWS Systems Managers, Amazon CloudWatch, Amazon Elastic Compute Cloud (EC2) and/or Amazon Elastic Container Service.  The main template deploys Active Directory and a scalable VPC. The workload template deploys into an existing Active Directory (AD) and VPC environment. **WARNING** This template creates Amazon EC2 Windows instances, ECS containers and related resources. You will be billed for the AWS resources used if you create a stack from this template. (qs-1r91fg4hu)\",\n    \"Metadata\" : {\n      \"QuickStartDocumentation\" : {\n        \"EntrypointName\" : \"Deploy into a new VPC\",\n        \"Order\" : \"1\"\n      },\n      \"AWS::CloudFormation::Interface\" : {\n        \"ParameterGroups\" : [ {\n          \"Label\" : {\n            \"default\" : \"Deployment Type\"\n          },\n          \"Parameters\" : [ \"DeploymentType\", \"ECSImage\" ]\n        }, {\n          \"Label\" : {\n            \"default\" : \"Active Directory configuration\"\n          },\n          \"Parameters\" : [ \"ADScenarioType\", \"DomainDNSName\", \"DomainNetBIOSName\", \"DomainAdminUser\", \"DomainAdminPassword\" ]\n        }, {\n          \"Label\" : {\n            \"default\" : \"Self-managed Active Directory configuration (optional if Active Directory is deployed on EC2)\"\n          },\n          \"Parameters\" : [ \"ADServer1InstanceType\", \"ADServer1NetBIOSName\", \"ADServer1PrivateIP\", \"ADServer2InstanceType\", \"ADServer2NetBIOSName\", \"ADServer2PrivateIP\" ]\n        }, {\n          \"Label\" : {\n            \"default\" : \"Amazon EC2 configuration\"\n          },\n          \"Parameters\" : [ \"KeyPairName\" ]\n        }, {\n          \"Label\" : {\n            \"default\" : \"Network configuration\"\n          },\n          \"Parameters\" : [ \"AvailabilityZones\", \"VPCCIDR\", \"NumberOfAZs\", \"PublicSubnet1CIDR\", \"PublicSubnet2CIDR\", \"PublicSubnet3CIDR\", \"PrivateSubnet1CIDR\", \"PrivateSubnet2CIDR\", \"PrivateSubnet3CIDR\" ]\n        }, {\n          \"Label\" : {\n            \"default\" : \"RD gateway configuration\"\n          },\n          \"Parameters\" : [ \"RDGWCIDR\", \"NumberOfRDGWHosts\", \"RDGWInstanceType\" ]\n        }, {\n          \"Label\" : {\n            \"default\" : \"Auto Scaling group / Application Load Balancer configuration\"\n          },\n          \"Parameters\" : [ \"ASGDesiredCapacity\", \"ASGMaxSize\", \"ASGMinSize\", \"ELBSchemeParameter\", \"WebAccessCIDR\", \"IISServerInstanceType\", \"SetupAppInsightsMonitoring\" ]\n        }, {\n          \"Label\" : {\n            \"default\" : \"IIS Webpage\"\n          },\n          \"Parameters\" : [ \"WebBucketName\", \"WebBucketKey\" ]\n        }, {\n          \"Label\" : {\n            \"default\" : \"AWS Quick Start configuration\"\n          },\n          \"Parameters\" : [ \"QSS3BucketName\", \"QSS3BucketRegion\", \"QSS3KeyPrefix\" ]\n        } ],\n        \"ParameterLabels\" : {\n          \"ADScenarioType\" : {\n            \"default\" : \"Active Directory scenario type\"\n          },\n          \"ADServer1InstanceType\" : {\n            \"default\" : \"Domain controller 1 instance type\"\n          },\n          \"ADServer1NetBIOSName\" : {\n            \"default\" : \"Domain controller 1 NetBIOS name\"\n          },\n          \"ADServer1PrivateIP\" : {\n            \"default\" : \"Domain controller 1 private IP address\"\n          },\n          \"ADServer2InstanceType\" : {\n            \"default\" : \"Domain controller 2 instance type\"\n          },\n          \"ADServer2NetBIOSName\" : {\n            \"default\" : \"Domain controller 2 NetBIOS name\"\n          },\n          \"ADServer2PrivateIP\" : {\n            \"default\" : \"Domain controller 2 private IP address\"\n          },\n          \"ASGDesiredCapacity\" : {\n            \"default\" : \"Desired capacity of the Auto Scaling group\"\n          },\n          \"ASGMaxSize\" : {\n            \"default\" : \"Auto Scaling group maximum instance size\"\n          },\n          \"ASGMinSize\" : {\n            \"default\" : \"Auto Scaling group minimum instance size\"\n          },\n          \"AvailabilityZones\" : {\n            \"default\" : \"Availability Zones\"\n          },\n          \"DeploymentType\" : {\n            \"default\" : \"Deployment type for IIS\"\n          },\n          \"DomainAdminPassword\" : {\n            \"default\" : \"Domain administrator password\"\n          },\n          \"DomainAdminUser\" : {\n            \"default\" : \"Domain administrator name\"\n          },\n          \"DomainDNSName\" : {\n            \"default\" : \"Domain DNS name\"\n          },\n          \"DomainNetBIOSName\" : {\n            \"default\" : \"Domain NetBIOS name\"\n          },\n          \"ECSImage\" : {\n            \"default\" : \"ECS Windows Container Image\"\n          },\n          \"ELBSchemeParameter\" : {\n            \"default\" : \"Elastic Load Balancing scheme\"\n          },\n          \"IISServerInstanceType\" : {\n            \"default\" : \"IIS servers instance type\"\n          },\n          \"KeyPairName\" : {\n            \"default\" : \"Key-pair name\"\n          },\n          \"NumberOfAZs\" : {\n            \"default\" : \"Number of Availability Zones\"\n          },\n          \"NumberOfRDGWHosts\" : {\n            \"default\" : \"Number of RD gateway hosts\"\n          },\n          \"PrivateSubnet1CIDR\" : {\n            \"default\" : \"Private subnet 1 CIDR\"\n          },\n          \"PrivateSubnet2CIDR\" : {\n            \"default\" : \"Private subnet 2 CIDR\"\n          },\n          \"PrivateSubnet3CIDR\" : {\n            \"default\" : \"Private subnet 3 CIDR\"\n          },\n          \"PublicSubnet1CIDR\" : {\n            \"default\" : \"Public subnet 1 CIDR\"\n          },\n          \"PublicSubnet2CIDR\" : {\n            \"default\" : \"Public subnet 2 CIDR\"\n          },\n          \"PublicSubnet3CIDR\" : {\n            \"default\" : \"Public subnet 3 CIDR\"\n          },\n          \"QSS3BucketName\" : {\n            \"default\" : \"Quick Start S3 bucket name\"\n          },\n          \"QSS3BucketRegion\" : {\n            \"default\" : \"Quick Start S3 bucket Region\"\n          },\n          \"QSS3KeyPrefix\" : {\n            \"default\" : \"Quick Start S3 key prefix\"\n          },\n          \"SetupAppInsightsMonitoring\" : {\n            \"default\" : \"Setup Application Insights monitoring\"\n          },\n          \"RDGWInstanceType\" : {\n            \"default\" : \"RD gateway instance type\"\n          },\n          \"RDGWCIDR\" : {\n            \"default\" : \"Allowed RD gateway external access CIDR\"\n          },\n          \"WebAccessCIDR\" : {\n            \"default\" : \"Elastic Load Balancers CIDR range\"\n          },\n          \"WebBucketName\" : {\n            \"default\" : \"S3 Bucket Webpage Location\"\n          },\n          \"WebBucketKey\" : {\n            \"default\" : \"S3 Key Webpage Location\"\n          },\n          \"VPCCIDR\" : {\n            \"default\" : \"VPC CIDR\"\n          }\n        }\n      }\n    },\n    \"Parameters\" : {\n      \"ADScenarioType\" : {\n        \"AllowedValues\" : [ \"AWS Directory Service for Microsoft AD (Enterprise Edition)\", \"Microsoft AD on Amazon EC2\" ],\n        \"Default\" : \"AWS Directory Service for Microsoft AD (Enterprise Edition)\",\n        \"Description\" : \"Select the type of deployment to use, either AWS Directory Service for Microsoft Active Directory or managing your own Amazon EC2 Active Directory instances.\",\n        \"Type\" : \"String\"\n      },\n      \"ADServer1InstanceType\" : {\n        \"AllowedValues\" : [ \"t3.medium\", \"t3.large\", \"t3.xlarge\", \"t3.2xlarge\", \"m5.large\", \"m5.xlarge\", \"m5.2xlarge\", \"m5.4xlarge\" ],\n        \"Default\" : \"m5.xlarge\",\n        \"Description\" : \"Amazon EC2 instance type for the first Active Directory instance.\",\n        \"Type\" : \"String\"\n      },\n      \"ADServer1NetBIOSName\" : {\n        \"AllowedPattern\" : \"[a-zA-Z0-9\\\\-]+\",\n        \"Default\" : \"DC1\",\n        \"Description\" : \"NetBIOS name of the first Active Directory server (up to 15 characters).\",\n        \"MaxLength\" : \"15\",\n        \"MinLength\" : \"1\",\n        \"Type\" : \"String\"\n      },\n      \"ADServer1PrivateIP\" : {\n        \"AllowedPattern\" : \"^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\\\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$\",\n        \"Default\" : \"10.0.0.10\",\n        \"Description\" : \"Fixed private IP address for the first Active Directory server, located in Availability Zone 1.\",\n        \"Type\" : \"String\"\n      },\n      \"ADServer2InstanceType\" : {\n        \"AllowedValues\" : [ \"t3.medium\", \"t3.large\", \"t3.xlarge\", \"t3.2xlarge\", \"m5.large\", \"m5.xlarge\", \"m5.2xlarge\", \"m5.4xlarge\" ],\n        \"Default\" : \"m5.xlarge\",\n        \"Description\" : \"Amazon EC2 instance type for the second Active Directory instance.\",\n        \"Type\" : \"String\"\n      },\n      \"ADServer2NetBIOSName\" : {\n        \"AllowedPattern\" : \"[a-zA-Z0-9\\\\-]+\",\n        \"Default\" : \"DC2\",\n        \"Description\" : \"NetBIOS name of the second Active Directory server (up to 15 characters).\",\n        \"MaxLength\" : \"15\",\n        \"MinLength\" : \"1\",\n        \"Type\" : \"String\"\n      },\n      \"ADServer2PrivateIP\" : {\n        \"AllowedPattern\" : \"^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\\\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$\",\n        \"Default\" : \"10.0.32.10\",\n        \"Description\" : \"Fixed private IP address for the second Active Directory server, located in Availability Zone 2.\",\n        \"Type\" : \"String\"\n      },\n      \"ASGMinSize\" : {\n        \"Default\" : 2,\n        \"Type\" : \"Number\",\n        \"Description\" : \"Minimum instance size for the Auto Scaling group.\"\n      },\n      \"ASGMaxSize\" : {\n        \"Default\" : 4,\n        \"Type\" : \"Number\",\n        \"Description\" : \"Maximum instance size for the Auto Scaling group.\"\n      },\n      \"ASGDesiredCapacity\" : {\n        \"Default\" : 2,\n        \"Type\" : \"Number\",\n        \"Description\" : \"Desired capacity of the Auto Scaling group.\"\n      },\n      \"AvailabilityZones\" : {\n        \"Description\" : \"List of Availability Zones to use for the subnets in the VPC. The logical order is preserved. At least two Availability Zones must be provided.\",\n        \"Type\" : \"List<AWS::EC2::AvailabilityZone::Name>\"\n      },\n      \"DeploymentType\" : {\n        \"Type\" : \"String\",\n        \"Description\" : \"Deploy IIS on EC2 or ECS\",\n        \"Default\" : \"EC2\",\n        \"AllowedValues\" : [ \"EC2\", \"ECS\" ]\n      },\n      \"DomainAdminPassword\" : {\n        \"AllowedPattern\" : \"(?=^.{6,255}$)((?=.*\\\\d)(?=.*[A-Z])(?=.*[a-z])|(?=.*\\\\d)(?=.*[^A-Za-z0-9])(?=.*[a-z])|(?=.*[^A-Za-z0-9])(?=.*[A-Z])(?=.*[a-z])|(?=.*\\\\d)(?=.*[A-Z])(?=.*[^A-Za-z0-9]))^.*\",\n        \"Description\" : \"Password for the domain administrator. Must be at least 8 characters containing letters, numbers, and symbols.\",\n        \"MaxLength\" : \"32\",\n        \"MinLength\" : \"8\",\n        \"NoEcho\" : \"true\",\n        \"Type\" : \"String\"\n      },\n      \"DomainAdminUser\" : {\n        \"AllowedPattern\" : \"[a-zA-Z0-9]*\",\n        \"Default\" : \"Admin\",\n        \"Description\" : \"User name for the domain administrator account. This is separate from the default administrator account. Note: This is for a self-managed Active Directory scenario. When using AWS Directory Service for Microsoft Active Directory, \\\"Admin\\\" is the default regardless of the value provided.      \",\n        \"MaxLength\" : \"25\",\n        \"MinLength\" : \"5\",\n        \"Type\" : \"String\"\n      },\n      \"DomainDNSName\" : {\n        \"AllowedPattern\" : \"[a-zA-Z0-9\\\\-]+\\\\..+\",\n        \"Default\" : \"example.com\",\n        \"Description\" : \"Fully qualified domain name (FQDN) of the forest root domain.\",\n        \"MaxLength\" : \"255\",\n        \"MinLength\" : \"2\",\n        \"Type\" : \"String\"\n      },\n      \"DomainNetBIOSName\" : {\n        \"AllowedPattern\" : \"[a-zA-Z0-9\\\\-]+\",\n        \"Default\" : \"example\",\n        \"Description\" : \"NetBIOS name of the domain for users of earlier Windows versions (up to 15 characters).\",\n        \"MaxLength\" : \"15\",\n        \"MinLength\" : \"1\",\n        \"Type\" : \"String\"\n      },\n      \"ECSImage\" : {\n        \"Type\" : \"String\",\n        \"Default\" : \"microsoft/iis\",\n        \"Description\" : \"ECS Container Image for Windows. Only needed if ECS deployment type is used\"\n      },\n      \"ELBSchemeParameter\" : {\n        \"Type\" : \"String\",\n        \"Description\" : \"Choose whether the Elastic Load Balancer is public or private.\",\n        \"Default\" : \"internet-facing\",\n        \"AllowedValues\" : [ \"internet-facing\", \"internal\" ]\n      },\n      \"IISServerInstanceType\" : {\n        \"AllowedValues\" : [ \"t2.micro\", \"t2.small\", \"t2.medium\", \"t2.large\", \"t2.xlarge\", \"t2.2xlarge\", \"t3.micro\", \"t3.small\", \"t3.medium\", \"t3.large\", \"t3.xlarge\", \"t3.2xlarge\", \"m4.large\", \"m4.xlarge\", \"m4.2xlarge\", \"m4.4xlarge\", \"m4.10xlarge\", \"m5.large\", \"m5.xlarge\", \"m5.2xlarge\", \"m5.4xlarge\", \"m5.8xlarge\", \"m5.12xlarge\", \"m5.16xlarge\", \"m5.24xlarge\", \"c4.large\", \"c4.xlarge\", \"c4.2xlarge\", \"c4.4xlarge\", \"c4.8xlarge\", \"c5.large\", \"c5.xlarge\", \"c5.2xlarge\", \"c5.4xlarge\", \"c5.9xlarge\", \"c5.12xlarge\", \"c5.18xlarge\", \"c5.24xlarge\", \"r4.large\", \"r4.xlarge\", \"r4.2xlarge\", \"r4.4xlarge\", \"r4.8xlarge\", \"r5.large\", \"r5.xlarge\", \"r5.2xlarge\", \"r5.4xlarge\", \"r5.8xlarge\", \"r5.12xlarge\", \"r5.16xlarge\", \"r5.24xlarge\" ],\n        \"Default\" : \"t3.2xlarge\",\n        \"Description\" : \"Amazon EC2 instance type for the IIS Server instances.\",\n        \"Type\" : \"String\"\n      },\n      \"KeyPairName\" : {\n        \"Description\" : \"Key pairs for connecting to your instance after it launches.\",\n        \"Type\" : \"AWS::EC2::KeyPair::KeyName\"\n      },\n      \"NumberOfRDGWHosts\" : {\n        \"AllowedValues\" : [ \"0\", \"1\", \"2\", \"3\", \"4\" ],\n        \"Default\" : \"1\",\n        \"Description\" : \"Enter the number of RD gateway hosts to create.\",\n        \"Type\" : \"String\"\n      },\n      \"NumberOfAZs\" : {\n        \"AllowedValues\" : [ \"2\", \"3\" ],\n        \"Default\" : \"2\",\n        \"Description\" : \"Number of Availability Zones to use in the VPC. This must correspond to the number of Availability Zones entered in the Availability Zones parameter.\",\n        \"Type\" : \"String\"\n      },\n      \"PrivateSubnet1CIDR\" : {\n        \"AllowedPattern\" : \"^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\\\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])(\\\\/([0-9]|[1-2][0-9]|3[0-2]))$\",\n        \"Default\" : \"10.0.0.0/19\",\n        \"Description\" : \"CIDR block for private subnet 1, located in Availability Zone 1.\",\n        \"Type\" : \"String\"\n      },\n      \"PrivateSubnet2CIDR\" : {\n        \"AllowedPattern\" : \"^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\\\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])(\\\\/([0-9]|[1-2][0-9]|3[0-2]))$\",\n        \"Default\" : \"10.0.32.0/19\",\n        \"Description\" : \"CIDR block for private subnet 2, located in Availability Zone 2.\",\n        \"Type\" : \"String\"\n      },\n      \"PrivateSubnet3CIDR\" : {\n        \"AllowedPattern\" : \"^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\\\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])(\\\\/([0-9]|[1-2][0-9]|3[0-2]))$\",\n        \"Default\" : \"10.0.64.0/19\",\n        \"Description\" : \"(Optional) CIDR block for optional private subnet 3, located in Availability Zone 3.\",\n        \"Type\" : \"String\"\n      },\n      \"PublicSubnet1CIDR\" : {\n        \"Default\" : \"10.0.128.0/20\",\n        \"Description\" : \"CIDR block for the public subnet 2, located in Availability Zone 2.\",\n        \"Type\" : \"String\"\n      },\n      \"PublicSubnet2CIDR\" : {\n        \"Default\" : \"10.0.144.0/20\",\n        \"Description\" : \"CIDR block for the optional public subnet 3, located in Availability Zone 3.\",\n        \"Type\" : \"String\"\n      },\n      \"PublicSubnet3CIDR\" : {\n        \"Default\" : \"10.0.160.0/20\",\n        \"Description\" : \"(Optional) CIDR block for the optional public subnet 3, located in Availability Zone 3.\",\n        \"Type\" : \"String\"\n      },\n      \"QSS3BucketName\" : {\n        \"AllowedPattern\" : \"^[0-9a-zA-Z]+([0-9a-zA-Z-]*[0-9a-zA-Z])*$\",\n        \"ConstraintDescription\" : \"Can include numbers, lowercase letters, uppercase letters, and hyphens (-). However, it cannot start or end with a hyphen (-).\",\n        \"Default\" : \"aws-quickstart\",\n        \"Description\" : \"S3 bucket name for the Quick Start assets. This name can include numbers, lowercase letters, uppercase letters, and hyphens (-). It cannot start or end with a hyphen (-).\",\n        \"Type\" : \"String\"\n      },\n      \"QSS3BucketRegion\" : {\n        \"Default\" : \"us-east-1\",\n        \"Description\" : \"AWS Region where the Quick Start S3 bucket (QSS3BucketName) is hosted. Specify this value when using your own S3 bucket.\",\n        \"Type\" : \"String\"\n      },\n      \"QSS3KeyPrefix\" : {\n        \"AllowedPattern\" : \"^[0-9a-zA-Z-/]*$\",\n        \"ConstraintDescription\" : \"Can include numbers, lowercase letters, uppercase letters, hyphens (-), and forward slashes (/).\",\n        \"Default\" : \"quickstart-microsoft-iis/\",\n        \"Description\" : \"S3 key prefix for the Quick Start assets. This prefix can include numbers, lowercase letters, uppercase letters, hyphens (-), and forward slashes (/).\",\n        \"Type\" : \"String\"\n      },\n      \"SetupAppInsightsMonitoring\" : {\n        \"AllowedValues\" : [ \"true\", \"false\" ],\n        \"ConstraintDescription\" : \"Can include either true or false.\",\n        \"Default\" : \"false\",\n        \"Description\" : \"Setup Application Insights monitoring for all IIS resources. This parameter can include either true or false.\",\n        \"Type\" : \"String\"\n      },\n      \"RDGWInstanceType\" : {\n        \"Default\" : \"t2.large\",\n        \"AllowedValues\" : [ \"t2.small\", \"t2.medium\", \"t2.large\", \"t3.micro\", \"t3.small\", \"t3.medium\", \"t3.large\", \"t3.xlarge\", \"t3.2xlarge\", \"t3a.micro\", \"t3a.small\", \"t3a.medium\", \"t3a.large\", \"t3a.xlarge\", \"t3a.2xlarge\", \"m5.large\", \"m5.xlarge\", \"m5.2xlarge\", \"m5.4xlarge\", \"m5a.large\", \"m5a.xlarge\", \"m5a.2xlarge\" ],\n        \"Description\" : \"Amazon EC2 instance type for the RD gateway instances.\",\n        \"Type\" : \"String\"\n      },\n      \"RDGWCIDR\" : {\n        \"AllowedPattern\" : \"^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\\\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])(\\\\/([0-9]|[1-2][0-9]|3[0-2]))$\",\n        \"ConstraintDescription\" : \"CIDR block parameter, in the form x.x.x.x/x.\",\n        \"Description\" : \"The CIDR IP range that is permitted to access the RD gateway instances.\",\n        \"Type\" : \"String\"\n      },\n      \"WebAccessCIDR\" : {\n        \"AllowedPattern\" : \"^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\\\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])(\\\\/([0-9]|[1-2][0-9]|3[0-2]))$\",\n        \"ConstraintDescription\" : \"CIDR block parameter, in the form x.x.x.x/x.\",\n        \"Description\" : \"The CIDR IP range that is permitted to access the Elastic Load Balancers.\",\n        \"Type\" : \"String\"\n      },\n      \"WebBucketName\" : {\n        \"Type\" : \"String\",\n        \"Description\" : \"Bucket name where html file is located for iis. If left blank, a sample page will be used.\",\n        \"Default\" : \"\"\n      },\n      \"WebBucketKey\" : {\n        \"Type\" : \"String\",\n        \"AllowedPattern\" : \"^[0-9a-zA-Z-/.]*$\",\n        \"ConstraintDescription\" : \"Can include numbers, lowercase letters, uppercase letters, hyphens (-), and forward slashes (/).\",\n        \"Description\" : \"Bucket Key where html file is located for iis. Only change S3 Bucket Wepage is specified, otherwise leave as default.\",\n        \"Default\" : \"webfiles/index.html\"\n      },\n      \"VPCCIDR\" : {\n        \"AllowedPattern\" : \"^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\\\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])(\\\\/(1[6-9]|2[0-8]))$\",\n        \"ConstraintDescription\" : \"CIDR block parameter, in the form x.x.x.x/16-28.\",\n        \"Default\" : \"10.0.0.0/16\",\n        \"Description\" : \"CIDR block for the VPC.\",\n        \"Type\" : \"String\"\n      }\n    },\n    \"Conditions\" : {\n      \"UsingDefaultBucket\" : {\n        \"Fn::Equals\" : [ {\n          \"Ref\" : \"QSS3BucketName\"\n        }, \"aws-quickstart\" ]\n      },\n      \"IncludeRDGW\" : {\n        \"Fn::Not\" : [ {\n          \"Fn::Equals\" : [ {\n            \"Ref\" : \"NumberOfRDGWHosts\"\n          }, \"0\" ]\n        } ]\n      },\n      \"UseADonEC2\" : {\n        \"Fn::Equals\" : [ {\n          \"Ref\" : \"ADScenarioType\"\n        }, \"Microsoft AD on Amazon EC2\" ]\n      },\n      \"UseELBPublicSubnets\" : {\n        \"Fn::Equals\" : [ {\n          \"Ref\" : \"ELBSchemeParameter\"\n        }, \"internet-facing\" ]\n      },\n      \"3AZCondition\" : {\n        \"Fn::Equals\" : [ {\n          \"Ref\" : \"NumberOfAZs\"\n        }, \"3\" ]\n      }\n    },\n    \"Resources\" : {\n      \"VPCStack\" : {\n        \"Type\" : \"AWS::CloudFormation::Stack\",\n        \"Properties\" : {\n          \"TemplateURL\" : {\n            \"Fn::Sub\" : \"ssm-doc://arn:${AWS::Partition}:ssm:${AWS::Region}::document/AWSQuickStarts-AWS-VPC\"\n          },\n          \"Parameters\" : {\n            \"AvailabilityZones\" : {\n              \"Fn::Join\" : [ \",\", {\n                \"Ref\" : \"AvailabilityZones\"\n              } ]\n            },\n            \"NumberOfAZs\" : {\n              \"Ref\" : \"NumberOfAZs\"\n            },\n            \"PrivateSubnet1ACIDR\" : {\n              \"Ref\" : \"PrivateSubnet1CIDR\"\n            },\n            \"PrivateSubnet2ACIDR\" : {\n              \"Ref\" : \"PrivateSubnet2CIDR\"\n            },\n            \"PrivateSubnet3ACIDR\" : {\n              \"Fn::If\" : [ \"3AZCondition\", {\n                \"Ref\" : \"AWS::NoValue\"\n              }, {\n                \"Ref\" : \"PrivateSubnet3CIDR\"\n              } ]\n            },\n            \"PublicSubnet1CIDR\" : {\n              \"Ref\" : \"PublicSubnet1CIDR\"\n            },\n            \"PublicSubnet2CIDR\" : {\n              \"Ref\" : \"PublicSubnet2CIDR\"\n            },\n            \"PublicSubnet3CIDR\" : {\n              \"Fn::If\" : [ \"3AZCondition\", {\n                \"Ref\" : \"AWS::NoValue\"\n              }, {\n                \"Ref\" : \"PublicSubnet3CIDR\"\n              } ]\n            },\n            \"VPCCIDR\" : {\n              \"Ref\" : \"VPCCIDR\"\n            }\n          }\n        }\n      },\n      \"ADStack\" : {\n        \"Type\" : \"AWS::CloudFormation::Stack\",\n        \"Properties\" : {\n          \"TemplateURL\" : {\n            \"Fn::Sub\" : [ \"https://${S3Bucket}.s3.${S3Region}.${AWS::URLSuffix}/${QSS3KeyPrefix}submodules/quickstart-microsoft-activedirectory/templates/${QSADTemplate}\", {\n              \"QSADTemplate\" : {\n                \"Fn::If\" : [ \"UseADonEC2\", \"ad-1.template\", \"ad-3.template\" ]\n              },\n              \"S3Region\" : {\n                \"Fn::If\" : [ \"UsingDefaultBucket\", {\n                  \"Ref\" : \"AWS::Region\"\n                }, {\n                  \"Ref\" : \"QSS3BucketRegion\"\n                } ]\n              },\n              \"S3Bucket\" : {\n                \"Fn::If\" : [ \"UsingDefaultBucket\", {\n                  \"Fn::Sub\" : \"${QSS3BucketName}-${AWS::Region}\"\n                }, {\n                  \"Ref\" : \"QSS3BucketName\"\n                } ]\n              }\n            } ]\n          },\n          \"Parameters\" : {\n            \"Fn::If\" : [ \"UseADonEC2\", {\n              \"ADServer1InstanceType\" : {\n                \"Ref\" : \"ADServer1InstanceType\"\n              },\n              \"ADServer1NetBIOSName\" : {\n                \"Ref\" : \"ADServer1NetBIOSName\"\n              },\n              \"ADServer1PrivateIP\" : {\n                \"Ref\" : \"ADServer1PrivateIP\"\n              },\n              \"ADServer2InstanceType\" : {\n                \"Ref\" : \"ADServer2InstanceType\"\n              },\n              \"ADServer2NetBIOSName\" : {\n                \"Ref\" : \"ADServer2NetBIOSName\"\n              },\n              \"ADServer2PrivateIP\" : {\n                \"Ref\" : \"ADServer2PrivateIP\"\n              },\n              \"DomainAdminPassword\" : {\n                \"Ref\" : \"DomainAdminPassword\"\n              },\n              \"DomainAdminUser\" : {\n                \"Ref\" : \"DomainAdminUser\"\n              },\n              \"DomainDNSName\" : {\n                \"Ref\" : \"DomainDNSName\"\n              },\n              \"DomainNetBIOSName\" : {\n                \"Ref\" : \"DomainNetBIOSName\"\n              },\n              \"KeyPairName\" : {\n                \"Ref\" : \"KeyPairName\"\n              },\n              \"PrivateSubnet1ID\" : {\n                \"Fn::GetAtt\" : [ \"VPCStack\", \"Outputs.PrivateSubnet1AID\" ]\n              },\n              \"PrivateSubnet2ID\" : {\n                \"Fn::GetAtt\" : [ \"VPCStack\", \"Outputs.PrivateSubnet2AID\" ]\n              },\n              \"QSS3BucketName\" : {\n                \"Ref\" : \"QSS3BucketName\"\n              },\n              \"QSS3BucketRegion\" : {\n                \"Ref\" : \"QSS3BucketRegion\"\n              },\n              \"QSS3KeyPrefix\" : {\n                \"Fn::Sub\" : \"${QSS3KeyPrefix}submodules/quickstart-microsoft-activedirectory/\"\n              },\n              \"VPCCIDR\" : {\n                \"Ref\" : \"VPCCIDR\"\n              },\n              \"VPCID\" : {\n                \"Fn::GetAtt\" : [ \"VPCStack\", \"Outputs.VPCID\" ]\n              }\n            }, {\n              \"DomainAdminPassword\" : {\n                \"Ref\" : \"DomainAdminPassword\"\n              },\n              \"DomainDNSName\" : {\n                \"Ref\" : \"DomainDNSName\"\n              },\n              \"DomainNetBIOSName\" : {\n                \"Ref\" : \"DomainNetBIOSName\"\n              },\n              \"KeyPairName\" : {\n                \"Ref\" : \"KeyPairName\"\n              },\n              \"PrivateSubnet1ID\" : {\n                \"Fn::GetAtt\" : [ \"VPCStack\", \"Outputs.PrivateSubnet1AID\" ]\n              },\n              \"PrivateSubnet2ID\" : {\n                \"Fn::GetAtt\" : [ \"VPCStack\", \"Outputs.PrivateSubnet2AID\" ]\n              },\n              \"QSS3BucketName\" : {\n                \"Ref\" : \"QSS3BucketName\"\n              },\n              \"QSS3BucketRegion\" : {\n                \"Ref\" : \"QSS3BucketRegion\"\n              },\n              \"QSS3KeyPrefix\" : {\n                \"Fn::Sub\" : \"${QSS3KeyPrefix}submodules/quickstart-microsoft-activedirectory/\"\n              },\n              \"VPCCIDR\" : {\n                \"Ref\" : \"VPCCIDR\"\n              },\n              \"VPCID\" : {\n                \"Fn::GetAtt\" : [ \"VPCStack\", \"Outputs.VPCID\" ]\n              }\n            } ]\n          }\n        }\n      },\n      \"RDGWStack\" : {\n        \"Condition\" : \"IncludeRDGW\",\n        \"Type\" : \"AWS::CloudFormation::Stack\",\n        \"Properties\" : {\n          \"TemplateURL\" : {\n            \"Fn::Sub\" : [ \"https://${S3Bucket}.s3.${S3Region}.${AWS::URLSuffix}/${QSS3KeyPrefix}submodules/quickstart-microsoft-rdgateway/templates/rdgw-domain.template\", {\n              \"S3Region\" : {\n                \"Fn::If\" : [ \"UsingDefaultBucket\", {\n                  \"Ref\" : \"AWS::Region\"\n                }, {\n                  \"Ref\" : \"QSS3BucketRegion\"\n                } ]\n              },\n              \"S3Bucket\" : {\n                \"Fn::If\" : [ \"UsingDefaultBucket\", {\n                  \"Fn::Sub\" : \"${QSS3BucketName}-${AWS::Region}\"\n                }, {\n                  \"Ref\" : \"QSS3BucketName\"\n                } ]\n              }\n            } ]\n          },\n          \"Parameters\" : {\n            \"DomainAdminPassword\" : {\n              \"Ref\" : \"DomainAdminPassword\"\n            },\n            \"DomainAdminUser\" : {\n              \"Fn::If\" : [ \"UseADonEC2\", {\n                \"Ref\" : \"DomainAdminUser\"\n              }, \"admin\" ]\n            },\n            \"DomainDNSName\" : {\n              \"Ref\" : \"DomainDNSName\"\n            },\n            \"DomainMemberSGID\" : {\n              \"Fn::GetAtt\" : [ \"ADStack\", \"Outputs.DomainMemberSGID\" ]\n            },\n            \"DomainNetBIOSName\" : {\n              \"Ref\" : \"DomainNetBIOSName\"\n            },\n            \"KeyPairName\" : {\n              \"Ref\" : \"KeyPairName\"\n            },\n            \"NumberOfRDGWHosts\" : {\n              \"Ref\" : \"NumberOfRDGWHosts\"\n            },\n            \"PublicSubnet1ID\" : {\n              \"Fn::GetAtt\" : [ \"VPCStack\", \"Outputs.PublicSubnet1ID\" ]\n            },\n            \"PublicSubnet2ID\" : {\n              \"Fn::GetAtt\" : [ \"VPCStack\", \"Outputs.PublicSubnet2ID\" ]\n            },\n            \"QSS3BucketName\" : {\n              \"Ref\" : \"QSS3BucketName\"\n            },\n            \"QSS3BucketRegion\" : {\n              \"Ref\" : \"QSS3BucketRegion\"\n            },\n            \"QSS3KeyPrefix\" : {\n              \"Fn::Sub\" : \"${QSS3KeyPrefix}submodules/quickstart-microsoft-rdgateway/\"\n            },\n            \"RDGWCIDR\" : {\n              \"Ref\" : \"RDGWCIDR\"\n            },\n            \"RDGWInstanceType\" : {\n              \"Ref\" : \"RDGWInstanceType\"\n            },\n            \"VPCID\" : {\n              \"Fn::GetAtt\" : [ \"VPCStack\", \"Outputs.VPCID\" ]\n            }\n          }\n        }\n      },\n      \"IISStack\" : {\n        \"Type\" : \"AWS::CloudFormation::Stack\",\n        \"Properties\" : {\n          \"TemplateURL\" : {\n            \"Fn::Sub\" : \"ssm-doc://arn:${AWS::Partition}:ssm:${AWS::Region}::document/AWSQuickStarts-Microsoft-IIS-Existing-VPC\"\n          },\n          \"Parameters\" : {\n            \"ASGDesiredCapacity\" : {\n              \"Ref\" : \"ASGDesiredCapacity\"\n            },\n            \"ASGMaxSize\" : {\n              \"Ref\" : \"ASGMaxSize\"\n            },\n            \"ASGMinSize\" : {\n              \"Ref\" : \"ASGMinSize\"\n            },\n            \"DeploymentType\" : {\n              \"Ref\" : \"DeploymentType\"\n            },\n            \"DomainAdminPassword\" : {\n              \"Ref\" : \"DomainAdminPassword\"\n            },\n            \"DomainAdminUser\" : {\n              \"Ref\" : \"DomainAdminUser\"\n            },\n            \"DomainDNSName\" : {\n              \"Ref\" : \"DomainDNSName\"\n            },\n            \"DomainMemberSecurityGroup\" : {\n              \"Fn::GetAtt\" : [ \"ADStack\", \"Outputs.DomainMemberSGID\" ]\n            },\n            \"DomainNetBIOSName\" : {\n              \"Ref\" : \"DomainNetBIOSName\"\n            },\n            \"ELBSchemeParameter\" : {\n              \"Ref\" : \"ELBSchemeParameter\"\n            },\n            \"ELBSubnet1ID\" : {\n              \"Fn::If\" : [ \"UseELBPublicSubnets\", {\n                \"Fn::GetAtt\" : [ \"VPCStack\", \"Outputs.PublicSubnet1ID\" ]\n              }, {\n                \"Fn::GetAtt\" : [ \"VPCStack\", \"Outputs.PrivateSubnet1AID\" ]\n              } ]\n            },\n            \"ELBSubnet2ID\" : {\n              \"Fn::If\" : [ \"UseELBPublicSubnets\", {\n                \"Fn::GetAtt\" : [ \"VPCStack\", \"Outputs.PublicSubnet2ID\" ]\n              }, {\n                \"Fn::GetAtt\" : [ \"VPCStack\", \"Outputs.PrivateSubnet2AID\" ]\n              } ]\n            },\n            \"ECSImage\" : {\n              \"Ref\" : \"ECSImage\"\n            },\n            \"IISServerInstanceType\" : {\n              \"Ref\" : \"IISServerInstanceType\"\n            },\n            \"PrivateSubnet1ID\" : {\n              \"Fn::GetAtt\" : [ \"VPCStack\", \"Outputs.PrivateSubnet1AID\" ]\n            },\n            \"PrivateSubnet2ID\" : {\n              \"Fn::GetAtt\" : [ \"VPCStack\", \"Outputs.PrivateSubnet2AID\" ]\n            },\n            \"QSS3BucketName\" : {\n              \"Ref\" : \"QSS3BucketName\"\n            },\n            \"QSS3KeyPrefix\" : {\n              \"Fn::Sub\" : \"${QSS3KeyPrefix}\"\n            },\n            \"SetupAppInsightsMonitoring\" : {\n              \"Ref\" : \"SetupAppInsightsMonitoring\"\n            },\n            \"VPCID\" : {\n              \"Fn::GetAtt\" : [ \"VPCStack\", \"Outputs.VPCID\" ]\n            },\n            \"WebAccessCIDR\" : {\n              \"Ref\" : \"WebAccessCIDR\"\n            },\n            \"WebBucketKey\" : {\n              \"Ref\" : \"WebBucketKey\"\n            },\n            \"WebBucketName\" : {\n              \"Ref\" : \"WebBucketName\"\n            }\n          }\n        }\n      }\n    }\n  }\n}",
  "CreatedDate": "2022-08-15T19:14:52.938Z",
  "DisplayName": null,
  "DocumentFormat": {
    "Value": "JSON"
  },
  "DocumentType": {
    "Value": "CloudFormation"
  },
  "DocumentVersion": "5",
  "Name": "AWSQuickStarts-Microsoft-IIS",
  "Requires": [],
  "ReviewStatus": null,
  "Status": {
    "Value": "Active"
  },
  "StatusInformation": null,
  "VersionName": "AWSQuickStarts-Microsoft-IIS-2022-08-15-19-12-18",
  "ResponseMetadata": {
    "RequestId": "31159387-f293-4134-86cf-8c9b6aa741cf",
    "Metadata": {},
    "ChecksumAlgorithm": 0,
    "ChecksumValidationStatus": 0
  },
  "ContentLength": 34613,
  "HttpStatusCode": 200,
  "LoggedAt": "2022-08-31T07:34:40.0016952+00:00"
}
