{
  "AttachmentsContent": [],
  "Content": "{\n  \"schemaVersion\" : \"1.0\",\n  \"description\" : \"Operational Best Practices for BCP and DR\",\n  \"templateBody\" : {\n    \"Parameters\" : {\n      \"BackupPlanMinFrequencyAndMinRetentionCheckParamRequiredFrequencyUnit\" : {\n        \"Default\" : \"days\",\n        \"Type\" : \"String\"\n      },\n      \"BackupPlanMinFrequencyAndMinRetentionCheckParamRequiredFrequencyValue\" : {\n        \"Default\" : \"1\",\n        \"Type\" : \"String\"\n      },\n      \"BackupPlanMinFrequencyAndMinRetentionCheckParamRequiredRetentionDays\" : {\n        \"Default\" : \"35\",\n        \"Type\" : \"String\"\n      },\n      \"BackupRecoveryPointMinimumRetentionCheckParamRequiredRetentionDays\" : {\n        \"Default\" : \"35\",\n        \"Type\" : \"String\"\n      },\n      \"DynamodbThroughputLimitCheckParamAccountRCUThresholdPercentage\" : {\n        \"Default\" : \"80\",\n        \"Type\" : \"String\"\n      },\n      \"DynamodbThroughputLimitCheckParamAccountWCUThresholdPercentage\" : {\n        \"Default\" : \"80\",\n        \"Type\" : \"String\"\n      },\n      \"LambdaConcurrencyCheckParamConcurrencyLimitHigh\" : {\n        \"Default\" : \"1000\",\n        \"Type\" : \"String\"\n      },\n      \"LambdaConcurrencyCheckParamConcurrencyLimitLow\" : {\n        \"Default\" : \"500\",\n        \"Type\" : \"String\"\n      }\n    },\n    \"Resources\" : {\n      \"AuroraResourcesProtectedByBackupPlan\" : {\n        \"Properties\" : {\n          \"ConfigRuleName\" : \"aurora-resources-protected-by-backup-plan\",\n          \"Scope\" : {\n            \"ComplianceResourceTypes\" : [ \"AWS::RDS::DBCluster\" ]\n          },\n          \"Source\" : {\n            \"Owner\" : \"AWS\",\n            \"SourceIdentifier\" : \"AURORA_RESOURCES_PROTECTED_BY_BACKUP_PLAN\"\n          }\n        },\n        \"Type\" : \"AWS::Config::ConfigRule\"\n      },\n      \"AutoscalingGroupElbHealthcheckRequired\" : {\n        \"Properties\" : {\n          \"ConfigRuleName\" : \"autoscaling-group-elb-healthcheck-required\",\n          \"Scope\" : {\n            \"ComplianceResourceTypes\" : [ \"AWS::AutoScaling::AutoScalingGroup\" ]\n          },\n          \"Source\" : {\n            \"Owner\" : \"AWS\",\n            \"SourceIdentifier\" : \"AUTOSCALING_GROUP_ELB_HEALTHCHECK_REQUIRED\"\n          }\n        },\n        \"Type\" : \"AWS::Config::ConfigRule\"\n      },\n      \"BackupPlanMinFrequencyAndMinRetentionCheck\" : {\n        \"Properties\" : {\n          \"ConfigRuleName\" : \"backup-plan-min-frequency-and-min-retention-check\",\n          \"InputParameters\" : {\n            \"requiredFrequencyUnit\" : {\n              \"Fn::If\" : [ \"backupPlanMinFrequencyAndMinRetentionCheckParamRequiredFrequencyUnit\", {\n                \"Ref\" : \"BackupPlanMinFrequencyAndMinRetentionCheckParamRequiredFrequencyUnit\"\n              }, {\n                \"Ref\" : \"AWS::NoValue\"\n              } ]\n            },\n            \"requiredFrequencyValue\" : {\n              \"Fn::If\" : [ \"backupPlanMinFrequencyAndMinRetentionCheckParamRequiredFrequencyValue\", {\n                \"Ref\" : \"BackupPlanMinFrequencyAndMinRetentionCheckParamRequiredFrequencyValue\"\n              }, {\n                \"Ref\" : \"AWS::NoValue\"\n              } ]\n            },\n            \"requiredRetentionDays\" : {\n              \"Fn::If\" : [ \"backupPlanMinFrequencyAndMinRetentionCheckParamRequiredRetentionDays\", {\n                \"Ref\" : \"BackupPlanMinFrequencyAndMinRetentionCheckParamRequiredRetentionDays\"\n              }, {\n                \"Ref\" : \"AWS::NoValue\"\n              } ]\n            }\n          },\n          \"Scope\" : {\n            \"ComplianceResourceTypes\" : [ \"AWS::Backup::BackupPlan\" ]\n          },\n          \"Source\" : {\n            \"Owner\" : \"AWS\",\n            \"SourceIdentifier\" : \"BACKUP_PLAN_MIN_FREQUENCY_AND_MIN_RETENTION_CHECK\"\n          }\n        },\n        \"Type\" : \"AWS::Config::ConfigRule\"\n      },\n      \"BackupRecoveryPointEncrypted\" : {\n        \"Properties\" : {\n          \"ConfigRuleName\" : \"backup-recovery-point-encrypted\",\n          \"Scope\" : {\n            \"ComplianceResourceTypes\" : [ \"AWS::Backup::RecoveryPoint\" ]\n          },\n          \"Source\" : {\n            \"Owner\" : \"AWS\",\n            \"SourceIdentifier\" : \"BACKUP_RECOVERY_POINT_ENCRYPTED\"\n          }\n        },\n        \"Type\" : \"AWS::Config::ConfigRule\"\n      },\n      \"BackupRecoveryPointManualDeletionDisabled\" : {\n        \"Properties\" : {\n          \"ConfigRuleName\" : \"backup-recovery-point-manual-deletion-disabled\",\n          \"Scope\" : {\n            \"ComplianceResourceTypes\" : [ \"AWS::Backup::BackupVault\" ]\n          },\n          \"Source\" : {\n            \"Owner\" : \"AWS\",\n            \"SourceIdentifier\" : \"BACKUP_RECOVERY_POINT_MANUAL_DELETION_DISABLED\"\n          }\n        },\n        \"Type\" : \"AWS::Config::ConfigRule\"\n      },\n      \"BackupRecoveryPointMinimumRetentionCheck\" : {\n        \"Properties\" : {\n          \"ConfigRuleName\" : \"backup-recovery-point-minimum-retention-check\",\n          \"InputParameters\" : {\n            \"requiredRetentionDays\" : {\n              \"Fn::If\" : [ \"backupRecoveryPointMinimumRetentionCheckParamRequiredRetentionDays\", {\n                \"Ref\" : \"BackupRecoveryPointMinimumRetentionCheckParamRequiredRetentionDays\"\n              }, {\n                \"Ref\" : \"AWS::NoValue\"\n              } ]\n            }\n          },\n          \"Scope\" : {\n            \"ComplianceResourceTypes\" : [ \"AWS::Backup::RecoveryPoint\" ]\n          },\n          \"Source\" : {\n            \"Owner\" : \"AWS\",\n            \"SourceIdentifier\" : \"BACKUP_RECOVERY_POINT_MINIMUM_RETENTION_CHECK\"\n          }\n        },\n        \"Type\" : \"AWS::Config::ConfigRule\"\n      },\n      \"DbInstanceBackupEnabled\" : {\n        \"Properties\" : {\n          \"ConfigRuleName\" : \"db-instance-backup-enabled\",\n          \"Scope\" : {\n            \"ComplianceResourceTypes\" : [ \"AWS::RDS::DBInstance\" ]\n          },\n          \"Source\" : {\n            \"Owner\" : \"AWS\",\n            \"SourceIdentifier\" : \"DB_INSTANCE_BACKUP_ENABLED\"\n          }\n        },\n        \"Type\" : \"AWS::Config::ConfigRule\"\n      },\n      \"DynamodbAutoscalingEnabled\" : {\n        \"Properties\" : {\n          \"ConfigRuleName\" : \"dynamodb-autoscaling-enabled\",\n          \"Scope\" : {\n            \"ComplianceResourceTypes\" : [ \"AWS::DynamoDB::Table\" ]\n          },\n          \"Source\" : {\n            \"Owner\" : \"AWS\",\n            \"SourceIdentifier\" : \"DYNAMODB_AUTOSCALING_ENABLED\"\n          }\n        },\n        \"Type\" : \"AWS::Config::ConfigRule\"\n      },\n      \"DynamodbInBackupPlan\" : {\n        \"Properties\" : {\n          \"ConfigRuleName\" : \"dynamodb-in-backup-plan\",\n          \"Source\" : {\n            \"Owner\" : \"AWS\",\n            \"SourceIdentifier\" : \"DYNAMODB_IN_BACKUP_PLAN\"\n          }\n        },\n        \"Type\" : \"AWS::Config::ConfigRule\"\n      },\n      \"DynamodbPitrEnabled\" : {\n        \"Properties\" : {\n          \"ConfigRuleName\" : \"dynamodb-pitr-enabled\",\n          \"Scope\" : {\n            \"ComplianceResourceTypes\" : [ \"AWS::DynamoDB::Table\" ]\n          },\n          \"Source\" : {\n            \"Owner\" : \"AWS\",\n            \"SourceIdentifier\" : \"DYNAMODB_PITR_ENABLED\"\n          }\n        },\n        \"Type\" : \"AWS::Config::ConfigRule\"\n      },\n      \"DynamodbThroughputLimitCheck\" : {\n        \"Properties\" : {\n          \"ConfigRuleName\" : \"dynamodb-throughput-limit-check\",\n          \"InputParameters\" : {\n            \"accountRCUThresholdPercentage\" : {\n              \"Fn::If\" : [ \"dynamodbThroughputLimitCheckParamAccountRCUThresholdPercentage\", {\n                \"Ref\" : \"DynamodbThroughputLimitCheckParamAccountRCUThresholdPercentage\"\n              }, {\n                \"Ref\" : \"AWS::NoValue\"\n              } ]\n            },\n            \"accountWCUThresholdPercentage\" : {\n              \"Fn::If\" : [ \"dynamodbThroughputLimitCheckParamAccountWCUThresholdPercentage\", {\n                \"Ref\" : \"DynamodbThroughputLimitCheckParamAccountWCUThresholdPercentage\"\n              }, {\n                \"Ref\" : \"AWS::NoValue\"\n              } ]\n            }\n          },\n          \"Source\" : {\n            \"Owner\" : \"AWS\",\n            \"SourceIdentifier\" : \"DYNAMODB_THROUGHPUT_LIMIT_CHECK\"\n          }\n        },\n        \"Type\" : \"AWS::Config::ConfigRule\"\n      },\n      \"EbsInBackupPlan\" : {\n        \"Properties\" : {\n          \"ConfigRuleName\" : \"ebs-in-backup-plan\",\n          \"Source\" : {\n            \"Owner\" : \"AWS\",\n            \"SourceIdentifier\" : \"EBS_IN_BACKUP_PLAN\"\n          }\n        },\n        \"Type\" : \"AWS::Config::ConfigRule\"\n      },\n      \"EbsOptimizedInstance\" : {\n        \"Properties\" : {\n          \"ConfigRuleName\" : \"ebs-optimized-instance\",\n          \"Scope\" : {\n            \"ComplianceResourceTypes\" : [ \"AWS::EC2::Instance\" ]\n          },\n          \"Source\" : {\n            \"Owner\" : \"AWS\",\n            \"SourceIdentifier\" : \"EBS_OPTIMIZED_INSTANCE\"\n          }\n        },\n        \"Type\" : \"AWS::Config::ConfigRule\"\n      },\n      \"Ec2ResourcesProtectedByBackupPlan\" : {\n        \"Properties\" : {\n          \"ConfigRuleName\" : \"ec2-resources-protected-by-backup-plan\",\n          \"Scope\" : {\n            \"ComplianceResourceTypes\" : [ \"AWS::EC2::Instance\" ]\n          },\n          \"Source\" : {\n            \"Owner\" : \"AWS\",\n            \"SourceIdentifier\" : \"EC2_RESOURCES_PROTECTED_BY_BACKUP_PLAN\"\n          }\n        },\n        \"Type\" : \"AWS::Config::ConfigRule\"\n      },\n      \"EfsInBackupPlan\" : {\n        \"Properties\" : {\n          \"ConfigRuleName\" : \"efs-in-backup-plan\",\n          \"Source\" : {\n            \"Owner\" : \"AWS\",\n            \"SourceIdentifier\" : \"EFS_IN_BACKUP_PLAN\"\n          }\n        },\n        \"Type\" : \"AWS::Config::ConfigRule\"\n      },\n      \"ElasticacheRedisClusterAutomaticBackupCheck\" : {\n        \"Properties\" : {\n          \"ConfigRuleName\" : \"elasticache-redis-cluster-automatic-backup-check\",\n          \"Source\" : {\n            \"Owner\" : \"AWS\",\n            \"SourceIdentifier\" : \"ELASTICACHE_REDIS_CLUSTER_AUTOMATIC_BACKUP_CHECK\"\n          }\n        },\n        \"Type\" : \"AWS::Config::ConfigRule\"\n      },\n      \"ElbCrossZoneLoadBalancingEnabled\" : {\n        \"Properties\" : {\n          \"ConfigRuleName\" : \"elb-cross-zone-load-balancing-enabled\",\n          \"Scope\" : {\n            \"ComplianceResourceTypes\" : [ \"AWS::ElasticLoadBalancing::LoadBalancer\" ]\n          },\n          \"Source\" : {\n            \"Owner\" : \"AWS\",\n            \"SourceIdentifier\" : \"ELB_CROSS_ZONE_LOAD_BALANCING_ENABLED\"\n          }\n        },\n        \"Type\" : \"AWS::Config::ConfigRule\"\n      },\n      \"ElbDeletionProtectionEnabled\" : {\n        \"Properties\" : {\n          \"ConfigRuleName\" : \"elb-deletion-protection-enabled\",\n          \"Scope\" : {\n            \"ComplianceResourceTypes\" : [ \"AWS::ElasticLoadBalancingV2::LoadBalancer\" ]\n          },\n          \"Source\" : {\n            \"Owner\" : \"AWS\",\n            \"SourceIdentifier\" : \"ELB_DELETION_PROTECTION_ENABLED\"\n          }\n        },\n        \"Type\" : \"AWS::Config::ConfigRule\"\n      },\n      \"FsxResourcesProtectedByBackupPlan\" : {\n        \"Properties\" : {\n          \"ConfigRuleName\" : \"fsx-resources-protected-by-backup-plan\",\n          \"Scope\" : {\n            \"ComplianceResourceTypes\" : [ ]\n          },\n          \"Source\" : {\n            \"Owner\" : \"AWS\",\n            \"SourceIdentifier\" : \"FSX_RESOURCES_PROTECTED_BY_BACKUP_PLAN\"\n          }\n        },\n        \"Type\" : \"AWS::Config::ConfigRule\"\n      },\n      \"LambdaConcurrencyCheck\" : {\n        \"Properties\" : {\n          \"ConfigRuleName\" : \"lambda-concurrency-check\",\n          \"InputParameters\" : {\n            \"ConcurrencyLimitHigh\" : {\n              \"Fn::If\" : [ \"lambdaConcurrencyCheckParamConcurrencyLimitHigh\", {\n                \"Ref\" : \"LambdaConcurrencyCheckParamConcurrencyLimitHigh\"\n              }, {\n                \"Ref\" : \"AWS::NoValue\"\n              } ]\n            },\n            \"ConcurrencyLimitLow\" : {\n              \"Fn::If\" : [ \"lambdaConcurrencyCheckParamConcurrencyLimitLow\", {\n                \"Ref\" : \"LambdaConcurrencyCheckParamConcurrencyLimitLow\"\n              }, {\n                \"Ref\" : \"AWS::NoValue\"\n              } ]\n            }\n          },\n          \"Scope\" : {\n            \"ComplianceResourceTypes\" : [ \"AWS::Lambda::Function\" ]\n          },\n          \"Source\" : {\n            \"Owner\" : \"AWS\",\n            \"SourceIdentifier\" : \"LAMBDA_CONCURRENCY_CHECK\"\n          }\n        },\n        \"Type\" : \"AWS::Config::ConfigRule\"\n      },\n      \"RdsInBackupPlan\" : {\n        \"Properties\" : {\n          \"ConfigRuleName\" : \"rds-in-backup-plan\",\n          \"Source\" : {\n            \"Owner\" : \"AWS\",\n            \"SourceIdentifier\" : \"RDS_IN_BACKUP_PLAN\"\n          }\n        },\n        \"Type\" : \"AWS::Config::ConfigRule\"\n      },\n      \"RdsInstanceDeletionProtectionEnabled\" : {\n        \"Properties\" : {\n          \"ConfigRuleName\" : \"rds-instance-deletion-protection-enabled\",\n          \"Scope\" : {\n            \"ComplianceResourceTypes\" : [ \"AWS::RDS::DBInstance\" ]\n          },\n          \"Source\" : {\n            \"Owner\" : \"AWS\",\n            \"SourceIdentifier\" : \"RDS_INSTANCE_DELETION_PROTECTION_ENABLED\"\n          }\n        },\n        \"Type\" : \"AWS::Config::ConfigRule\"\n      },\n      \"RdsMultiAzSupport\" : {\n        \"Properties\" : {\n          \"ConfigRuleName\" : \"rds-multi-az-support\",\n          \"Scope\" : {\n            \"ComplianceResourceTypes\" : [ \"AWS::RDS::DBInstance\" ]\n          },\n          \"Source\" : {\n            \"Owner\" : \"AWS\",\n            \"SourceIdentifier\" : \"RDS_MULTI_AZ_SUPPORT\"\n          }\n        },\n        \"Type\" : \"AWS::Config::ConfigRule\"\n      },\n      \"RedshiftBackupEnabled\" : {\n        \"Properties\" : {\n          \"ConfigRuleName\" : \"redshift-backup-enabled\",\n          \"Scope\" : {\n            \"ComplianceResourceTypes\" : [ \"AWS::Redshift::Cluster\" ]\n          },\n          \"Source\" : {\n            \"Owner\" : \"AWS\",\n            \"SourceIdentifier\" : \"REDSHIFT_BACKUP_ENABLED\"\n          }\n        },\n        \"Type\" : \"AWS::Config::ConfigRule\"\n      },\n      \"S3BucketDefaultLockEnabled\" : {\n        \"Properties\" : {\n          \"ConfigRuleName\" : \"s3-bucket-default-lock-enabled\",\n          \"Scope\" : {\n            \"ComplianceResourceTypes\" : [ \"AWS::S3::Bucket\" ]\n          },\n          \"Source\" : {\n            \"Owner\" : \"AWS\",\n            \"SourceIdentifier\" : \"S3_BUCKET_DEFAULT_LOCK_ENABLED\"\n          }\n        },\n        \"Type\" : \"AWS::Config::ConfigRule\"\n      },\n      \"S3BucketReplicationEnabled\" : {\n        \"Properties\" : {\n          \"ConfigRuleName\" : \"s3-bucket-replication-enabled\",\n          \"Scope\" : {\n            \"ComplianceResourceTypes\" : [ \"AWS::S3::Bucket\" ]\n          },\n          \"Source\" : {\n            \"Owner\" : \"AWS\",\n            \"SourceIdentifier\" : \"S3_BUCKET_REPLICATION_ENABLED\"\n          }\n        },\n        \"Type\" : \"AWS::Config::ConfigRule\"\n      },\n      \"S3BucketVersioningEnabled\" : {\n        \"Properties\" : {\n          \"ConfigRuleName\" : \"s3-bucket-versioning-enabled\",\n          \"Scope\" : {\n            \"ComplianceResourceTypes\" : [ \"AWS::S3::Bucket\" ]\n          },\n          \"Source\" : {\n            \"Owner\" : \"AWS\",\n            \"SourceIdentifier\" : \"S3_BUCKET_VERSIONING_ENABLED\"\n          }\n        },\n        \"Type\" : \"AWS::Config::ConfigRule\"\n      },\n      \"VpcVpn2TunnelsUp\" : {\n        \"Properties\" : {\n          \"ConfigRuleName\" : \"vpc-vpn-2-tunnels-up\",\n          \"Scope\" : {\n            \"ComplianceResourceTypes\" : [ \"AWS::EC2::VPNConnection\" ]\n          },\n          \"Source\" : {\n            \"Owner\" : \"AWS\",\n            \"SourceIdentifier\" : \"VPC_VPN_2_TUNNELS_UP\"\n          }\n        },\n        \"Type\" : \"AWS::Config::ConfigRule\"\n      }\n    },\n    \"Conditions\" : {\n      \"backupPlanMinFrequencyAndMinRetentionCheckParamRequiredFrequencyUnit\" : {\n        \"Fn::Not\" : [ {\n          \"Fn::Equals\" : [ \"\", {\n            \"Ref\" : \"BackupPlanMinFrequencyAndMinRetentionCheckParamRequiredFrequencyUnit\"\n          } ]\n        } ]\n      },\n      \"backupPlanMinFrequencyAndMinRetentionCheckParamRequiredFrequencyValue\" : {\n        \"Fn::Not\" : [ {\n          \"Fn::Equals\" : [ \"\", {\n            \"Ref\" : \"BackupPlanMinFrequencyAndMinRetentionCheckParamRequiredFrequencyValue\"\n          } ]\n        } ]\n      },\n      \"backupPlanMinFrequencyAndMinRetentionCheckParamRequiredRetentionDays\" : {\n        \"Fn::Not\" : [ {\n          \"Fn::Equals\" : [ \"\", {\n            \"Ref\" : \"BackupPlanMinFrequencyAndMinRetentionCheckParamRequiredRetentionDays\"\n          } ]\n        } ]\n      },\n      \"backupRecoveryPointMinimumRetentionCheckParamRequiredRetentionDays\" : {\n        \"Fn::Not\" : [ {\n          \"Fn::Equals\" : [ \"\", {\n            \"Ref\" : \"BackupRecoveryPointMinimumRetentionCheckParamRequiredRetentionDays\"\n          } ]\n        } ]\n      },\n      \"dynamodbThroughputLimitCheckParamAccountRCUThresholdPercentage\" : {\n        \"Fn::Not\" : [ {\n          \"Fn::Equals\" : [ \"\", {\n            \"Ref\" : \"DynamodbThroughputLimitCheckParamAccountRCUThresholdPercentage\"\n          } ]\n        } ]\n      },\n      \"dynamodbThroughputLimitCheckParamAccountWCUThresholdPercentage\" : {\n        \"Fn::Not\" : [ {\n          \"Fn::Equals\" : [ \"\", {\n            \"Ref\" : \"DynamodbThroughputLimitCheckParamAccountWCUThresholdPercentage\"\n          } ]\n        } ]\n      },\n      \"lambdaConcurrencyCheckParamConcurrencyLimitHigh\" : {\n        \"Fn::Not\" : [ {\n          \"Fn::Equals\" : [ \"\", {\n            \"Ref\" : \"LambdaConcurrencyCheckParamConcurrencyLimitHigh\"\n          } ]\n        } ]\n      },\n      \"lambdaConcurrencyCheckParamConcurrencyLimitLow\" : {\n        \"Fn::Not\" : [ {\n          \"Fn::Equals\" : [ \"\", {\n            \"Ref\" : \"LambdaConcurrencyCheckParamConcurrencyLimitLow\"\n          } ]\n        } ]\n      }\n    }\n  }\n}",
  "CreatedDate": "2022-08-25T22:44:51.437Z",
  "DisplayName": null,
  "DocumentFormat": {
    "Value": "JSON"
  },
  "DocumentType": {
    "Value": "ConformancePackTemplate"
  },
  "DocumentVersion": "1",
  "Name": "AWSConformancePacks-OperationalBestPracticesforBCPandDR",
  "Requires": [],
  "ReviewStatus": null,
  "Status": {
    "Value": "Active"
  },
  "StatusInformation": null,
  "VersionName": null,
  "ResponseMetadata": {
    "RequestId": "908966e8-e92e-4bd7-8686-179185e7e521",
    "Metadata": {},
    "ChecksumAlgorithm": 0,
    "ChecksumValidationStatus": 0
  },
  "ContentLength": 19083,
  "HttpStatusCode": 200,
  "LoggedAt": "2022-09-02T07:21:02.1681535+00:00"
}
