{
  "AttachmentsContent": [],
  "Content": "{\n  \"schemaVersion\" : \"1.0\",\n  \"description\" : \"**DEPRECATED: This template has been deprecated in favor of 'linux-bastion-entrypoint-existing-vpc.template.yaml', and is no longer being maintained.** LinuxBastion+VPC Jul,30,2020 (qs-1qup6ra99) (Please do not remove)\",\n  \"templateBody\" : {\n    \"AWSTemplateFormatVersion\" : \"2010-09-09\",\n    \"Description\" : \"**DEPRECATED: This template has been deprecated in favor of 'linux-bastion-entrypoint-existing-vpc.template.yaml', and is no longer being maintained.** LinuxBastion+VPC Jul,30,2020 (qs-1qup6ra99) (Please do not remove)\",\n    \"Metadata\" : {\n      \"QuickStartDocumentation\" : {\n        \"EntrypointName\" : \"Launch into an existing VPC\",\n        \"Order\" : 2\n      },\n      \"LICENSE\" : \"Apache License, Version 2.0\",\n      \"AWS::CloudFormation::Interface\" : {\n        \"ParameterGroups\" : [ {\n          \"Label\" : {\n            \"default\" : \"Network configuration\"\n          },\n          \"Parameters\" : [ \"VPCID\", \"PublicSubnet1ID\", \"PublicSubnet2ID\", \"RemoteAccessCIDR\" ]\n        }, {\n          \"Label\" : {\n            \"default\" : \"IAM configuration\"\n          },\n          \"Parameters\" : [ \"RolePath\", \"PermissionsBoundaryArn\" ]\n        }, {\n          \"Label\" : {\n            \"default\" : \"Amazon EC2 configuration\"\n          },\n          \"Parameters\" : [ \"KeyPairName\", \"BastionAMIOS\", \"BastionInstanceType\", \"RootVolumeSize\" ]\n        }, {\n          \"Label\" : {\n            \"default\" : \"Linux bastion configuration\"\n          },\n          \"Parameters\" : [ \"NumBastionHosts\", \"BastionHostName\", \"BastionTenancy\", \"EnableBanner\", \"BastionBanner\", \"EnableTCPForwarding\", \"EnableX11Forwarding\" ]\n        }, {\n          \"Label\" : {\n            \"default\" : \"Alternative configurations\"\n          },\n          \"Parameters\" : [ \"AlternativeInitializationScript\", \"OSImageOverride\", \"AlternativeIAMRole\", \"EnvironmentVariables\" ]\n        }, {\n          \"Label\" : {\n            \"default\" : \"AWS Quick Start configuration\"\n          },\n          \"Parameters\" : [ \"QSS3BucketName\", \"QSS3KeyPrefix\", \"QSS3BucketRegion\" ]\n        } ],\n        \"ParameterLabels\" : {\n          \"AlternativeIAMRole\" : {\n            \"default\" : \"Alternative IAM role\"\n          },\n          \"AlternativeInitializationScript\" : {\n            \"default\" : \"Alternative initialization script\"\n          },\n          \"BastionAMIOS\" : {\n            \"default\" : \"Bastion AMI operating system\"\n          },\n          \"BastionHostName\" : {\n            \"default\" : \"Bastion host Name\"\n          },\n          \"BastionTenancy\" : {\n            \"default\" : \"Bastion tenancy\"\n          },\n          \"BastionBanner\" : {\n            \"default\" : \"Banner text\"\n          },\n          \"QSS3BucketRegion\" : {\n            \"default\" : \"Quick Start S3 bucket Region\"\n          },\n          \"BastionInstanceType\" : {\n            \"default\" : \"Bastion instance type\"\n          },\n          \"EnableBanner\" : {\n            \"default\" : \"Bastion banner\"\n          },\n          \"EnableTCPForwarding\" : {\n            \"default\" : \"TCP forwarding\"\n          },\n          \"EnableX11Forwarding\" : {\n            \"default\" : \"X11 forwarding\"\n          },\n          \"EnvironmentVariables\" : {\n            \"default\" : \"Environment variables\"\n          },\n          \"KeyPairName\" : {\n            \"default\" : \"Key pair name\"\n          },\n          \"NumBastionHosts\" : {\n            \"default\" : \"Number of bastion hosts\"\n          },\n          \"OSImageOverride\" : {\n            \"default\" : \"Operating system override\"\n          },\n          \"PublicSubnet1ID\" : {\n            \"default\" : \"Public subnet 1 ID\"\n          },\n          \"PublicSubnet2ID\" : {\n            \"default\" : \"Public subnet 2 ID\"\n          },\n          \"QSS3BucketName\" : {\n            \"default\" : \"Quick Start S3 bucket name\"\n          },\n          \"QSS3KeyPrefix\" : {\n            \"default\" : \"Quick Start S3 key prefix\"\n          },\n          \"RemoteAccessCIDR\" : {\n            \"default\" : \"Allowed bastion external access CIDR\"\n          },\n          \"VPCID\" : {\n            \"default\" : \"VPC ID\"\n          },\n          \"RootVolumeSize\" : {\n            \"default\" : \"Root volume size\"\n          },\n          \"PermissionsBoundaryArn\" : {\n            \"default\" : \"Permissions boundary ARN\"\n          },\n          \"RolePath\" : {\n            \"default\" : \"Role path\"\n          }\n        }\n      }\n    },\n    \"Parameters\" : {\n      \"BastionAMIOS\" : {\n        \"Type\" : \"String\",\n        \"Description\" : \"The Linux distribution for the AMI to be used for the bastion host instances.\",\n        \"AllowedValues\" : [ \"Amazon-Linux2-HVM\", \"Amazon-Linux2-HVM-ARM\", \"CentOS-7-HVM\", \"Ubuntu-Server-20.04-LTS-HVM\", \"SUSE-SLES-15-HVM\" ],\n        \"Default\" : \"Amazon-Linux2-HVM\"\n      },\n      \"BastionHostName\" : {\n        \"Type\" : \"String\",\n        \"Description\" : \"The value used for the name tag of the bastion host.\",\n        \"Default\" : \"LinuxBastion\"\n      },\n      \"BastionBanner\" : {\n        \"Type\" : \"String\",\n        \"Description\" : \"Banner text to display upon login.\",\n        \"Default\" : \"\"\n      },\n      \"BastionTenancy\" : {\n        \"Type\" : \"String\",\n        \"Description\" : \"Bastion VPC tenancy (dedicated or default).\",\n        \"AllowedValues\" : [ \"dedicated\", \"default\" ],\n        \"Default\" : \"default\"\n      },\n      \"BastionInstanceType\" : {\n        \"Type\" : \"String\",\n        \"Description\" : \"Amazon EC2 instance type for the bastion instances.\",\n        \"Default\" : \"t2.micro\"\n      },\n      \"EnableBanner\" : {\n        \"Type\" : \"String\",\n        \"Description\" : \"Choose \\\"true\\\" to display a banner when connecting to the bastion using SSH.\",\n        \"AllowedValues\" : [ \"true\", \"false\" ],\n        \"Default\" : \"false\"\n      },\n      \"EnableTCPForwarding\" : {\n        \"Type\" : \"String\",\n        \"Description\" : \"To enable TCP forwarding, choose \\\"true\\\".\",\n        \"AllowedValues\" : [ \"true\", \"false\" ],\n        \"Default\" : \"false\"\n      },\n      \"EnableX11Forwarding\" : {\n        \"Type\" : \"String\",\n        \"Description\" : \"To enable X11 forwarding, choose \\\"true\\\".\",\n        \"AllowedValues\" : [ \"true\", \"false\" ],\n        \"Default\" : \"false\"\n      },\n      \"KeyPairName\" : {\n        \"Type\" : \"String\",\n        \"Description\" : \"Name of an existing public/private key pair. If you do not have one in this AWS Region, please create it before continuing. If left empty, AWS Systems Manager Session Manager can still be used to connect to the instance.\",\n        \"Default\" : \"\"\n      },\n      \"NumBastionHosts\" : {\n        \"Type\" : \"String\",\n        \"Description\" : \"The number of bastion hosts to create. The maximum number is four.\",\n        \"AllowedValues\" : [ 1, 2, 3, 4 ],\n        \"Default\" : 1\n      },\n      \"PublicSubnet1ID\" : {\n        \"Type\" : \"AWS::EC2::Subnet::Id\",\n        \"Description\" : \"ID of the public subnet 1 that you want to provision the first bastion into (for example, subnet-a0246dcd).\"\n      },\n      \"PublicSubnet2ID\" : {\n        \"Type\" : \"AWS::EC2::Subnet::Id\",\n        \"Description\" : \"ID of the public subnet 2 that you want to provision the second bastion into (for example, subnet-e3246d8e).\"\n      },\n      \"QSS3BucketName\" : {\n        \"Type\" : \"String\",\n        \"Description\" : \"Name of the S3 bucket for your copy of the Quick Start assets. Keep the default name unless you are customizing the template. Changing the name updates code references to point to a new Quick Start location. This name can include numbers, lowercase letters, uppercase letters, and hyphens, but do not start or end with a hyphen (-). See https://aws-quickstart.github.io/option1.html.\",\n        \"AllowedPattern\" : \"^[0-9a-zA-Z]+([0-9a-zA-Z-]*[0-9a-zA-Z])*$\",\n        \"ConstraintDescription\" : \"The Quick Start bucket name can include numbers, lowercase letters, uppercase letters, and hyphens (-). It cannot start or end with a hyphen (-).\",\n        \"Default\" : \"aws-quickstart\"\n      },\n      \"QSS3BucketRegion\" : {\n        \"Type\" : \"String\",\n        \"Description\" : \"The AWS Region where the Quick Start S3 bucket (QSS3BucketName) is hosted. When using your own bucket, you must specify this value.\",\n        \"Default\" : \"us-east-1\"\n      },\n      \"QSS3KeyPrefix\" : {\n        \"Type\" : \"String\",\n        \"Description\" : \"S3 key prefix that is used to simulate a directory for your copy of the Quick Start assets. Keep the default prefix unless you are customizing the template. Changing this prefix updates code references to point to a new Quick Start location. This prefix can include numbers, lowercase letters, uppercase letters, hyphens (-), and forward slashes (/). End with a forward slash. See https://docs.aws.amazon.com/AmazonS3/latest/dev/UsingMetadata.html and https://aws-quickstart.github.io/option1.html.\",\n        \"AllowedPattern\" : \"^([0-9a-zA-Z-.]+/)*$\",\n        \"ConstraintDescription\" : \"The Quick Start S3 key prefix can include numbers, lowercase letters, uppercase letters, hyphens (-), and forward slashes (/).\",\n        \"Default\" : \"quickstart-linux-bastion/\"\n      },\n      \"RemoteAccessCIDR\" : {\n        \"Type\" : \"String\",\n        \"Description\" : \"Allowed CIDR block for external SSH access to the bastions.\",\n        \"AllowedPattern\" : \"^disabled-onlyssmaccess$|^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\\\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])(\\\\/([0-9]|[1-2][0-9]|3[0-2]))$\",\n        \"ConstraintDescription\" : \"CIDR block parameter must be disabled-onlyssmaccess or in the format \\\"x.x.x.x/x\\\".\",\n        \"Default\" : \"disabled-onlyssmaccess\"\n      },\n      \"VPCID\" : {\n        \"Type\" : \"AWS::EC2::VPC::Id\",\n        \"Description\" : \"ID of the VPC (for example, vpc-0343606e).\"\n      },\n      \"AlternativeInitializationScript\" : {\n        \"Type\" : \"String\",\n        \"Description\" : \"An alternative initialization script to run during setup.\",\n        \"AllowedPattern\" : \"^https.*|^$\",\n        \"ConstraintDescription\" : \"URL must begin with https.\",\n        \"Default\" : \"\"\n      },\n      \"OSImageOverride\" : {\n        \"Type\" : \"String\",\n        \"Description\" : \"The Region-specific image to use for the instance.\",\n        \"Default\" : \"\"\n      },\n      \"AlternativeIAMRole\" : {\n        \"Type\" : \"String\",\n        \"Description\" : \"An existing IAM role name to attach to the bastion. If left blank, a new role will be created.\",\n        \"Default\" : \"\"\n      },\n      \"EnvironmentVariables\" : {\n        \"Type\" : \"String\",\n        \"Description\" : \"A comma-separated list of environment variables for use in bootstrapping. Variables must be in the format \\\"key=value\\\". \\\"Value\\\" cannot contain commas.\",\n        \"Default\" : \"\"\n      },\n      \"RootVolumeSize\" : {\n        \"Type\" : \"Number\",\n        \"Description\" : \"The size in GB for the root EBS volume.\",\n        \"Default\" : 10\n      },\n      \"PermissionsBoundaryArn\" : {\n        \"Type\" : \"String\",\n        \"Description\" : \"Will be attached to all created IAM roles to satisfy security requirements.\",\n        \"Default\" : \"\"\n      },\n      \"RolePath\" : {\n        \"Type\" : \"String\",\n        \"Description\" : \"Will be attached to all created IAM roles to satisfy security requirements.\",\n        \"Default\" : \"\"\n      }\n    },\n    \"Rules\" : {\n      \"SubnetsInVPC\" : {\n        \"Assertions\" : [ {\n          \"Assert\" : {\n            \"Fn::EachMemberIn\" : [ {\n              \"Fn::ValueOfAll\" : [ \"AWS::EC2::Subnet::Id\", \"VpcId\" ]\n            }, {\n              \"Fn::RefAll\" : \"AWS::EC2::VPC::Id\"\n            } ]\n          },\n          \"AssertDescription\" : \"All subnets must exist in the VPC.\"\n        } ]\n      },\n      \"ArmInstance\" : {\n        \"Assertions\" : [ {\n          \"Assert\" : {\n            \"Fn::Contains\" : [ [ \"t4g.nano\", \"t4g.medium\", \"t4g.large\", \"t4g.micro\", \"t4g.small\", \"t4g.2xlarge\", \"t4g.xlarge\", \"m6g.medium\", \"m6g.large\", \"m6g.xlarge\", \"m6g.2xlarge\" ], {\n              \"Ref\" : \"BastionInstanceType\"\n            } ]\n          },\n          \"AssertDescription\" : \"This instance type must use BastionAMIOS type of Amazon-Linux2-HVM-ARM.\"\n        } ],\n        \"RuleCondition\" : {\n          \"Fn::Equals\" : [ {\n            \"Ref\" : \"BastionAMIOS\"\n          }, \"Amazon-Linux2-HVM-ARM\" ]\n        }\n      }\n    },\n    \"Mappings\" : {\n      \"AWSAMIRegionMap\" : {\n        \"af-south-1\" : {\n          \"AMZNLINUX2\" : \"ami-0adee70ff4394e3d5\",\n          \"AMZNLINUX2ARM\" : \"ami-0695bab7208ee1344\",\n          \"US2004HVM\" : \"ami-0f5298ccab965edeb\",\n          \"CENTOS7HVM\" : \"ami-0a2be7731769e6cc1\",\n          \"SLES15HVM\" : \"ami-0b182a175a9344329\"\n        },\n        \"ap-east-1\" : {\n          \"AMZNLINUX2\" : \"ami-0b751f901b93720a5\",\n          \"AMZNLINUX2ARM\" : \"ami-0dcde9511d0b073f0\",\n          \"US2004HVM\" : \"ami-0dfad1f1f65cd083b\",\n          \"CENTOS7HVM\" : \"ami-0e5c29e6c87a9644f\",\n          \"SLES15HVM\" : \"ami-0ca7ed1fd25821f56\"\n        },\n        \"ap-northeast-1\" : {\n          \"AMZNLINUX2\" : \"ami-06ce6680729711877\",\n          \"AMZNLINUX2ARM\" : \"ami-07b3b0525cef50a4a\",\n          \"US2004HVM\" : \"ami-0986c991cc80c6ad9\",\n          \"CENTOS7HVM\" : \"ami-06a46da680048c8ae\",\n          \"SLES15HVM\" : \"ami-08d5afff14b78a281\"\n        },\n        \"ap-northeast-2\" : {\n          \"AMZNLINUX2\" : \"ami-0e1d09d8b7c751816\",\n          \"AMZNLINUX2ARM\" : \"ami-0008c5e405a3b3013\",\n          \"US2004HVM\" : \"ami-0565d651769eb3de5\",\n          \"CENTOS7HVM\" : \"ami-06e83aceba2cb0907\",\n          \"SLES15HVM\" : \"ami-0fe8ef15442bbbacb\"\n        },\n        \"ap-northeast-3\" : {\n          \"AMZNLINUX2\" : \"ami-0253beba286f3e848\",\n          \"AMZNLINUX2ARM\" : \"ami-011fa3a3b2ec9941a\",\n          \"US2004HVM\" : \"ami-0e6078093a109801c\",\n          \"CENTOS7HVM\" : \"ami-02d6b455335e3af14\",\n          \"SLES15HVM\" : \"ami-0bb84400e7507097c\"\n        },\n        \"ap-south-1\" : {\n          \"AMZNLINUX2\" : \"ami-09de362f44ba0a166\",\n          \"AMZNLINUX2ARM\" : \"ami-044ba583062cb113b\",\n          \"US2004HVM\" : \"ami-0325e3016099f9112\",\n          \"CENTOS7HVM\" : \"ami-026f33d38b6410e30\",\n          \"SLES15HVM\" : \"ami-0931494f2532d950d\"\n        },\n        \"ap-southeast-1\" : {\n          \"AMZNLINUX2\" : \"ami-0adf622550366ea53\",\n          \"AMZNLINUX2ARM\" : \"ami-0b9800433ca2a0b20\",\n          \"US2004HVM\" : \"ami-0eaf04122a1ae7b3b\",\n          \"CENTOS7HVM\" : \"ami-054bf1c1a522aa6e8\",\n          \"SLES15HVM\" : \"ami-0cc06d620beca2a35\"\n        },\n        \"ap-southeast-2\" : {\n          \"AMZNLINUX2\" : \"ami-03b836d87d294e89e\",\n          \"AMZNLINUX2ARM\" : \"ami-0eb411a778563ea89\",\n          \"US2004HVM\" : \"ami-048a2d001938101dd\",\n          \"CENTOS7HVM\" : \"ami-0d1eb46a368923d43\",\n          \"SLES15HVM\" : \"ami-03790de3a37ba87cc\"\n        },\n        \"ap-southeast-3\" : {\n          \"AMZNLINUX2\" : \"ami-0483d92a8124da6c9\",\n          \"US2004HVM\" : \"ami-09915141a4f1dafdd\",\n          \"CENTOS7HVM\" : \"ami-0c654ac429998fb1c\",\n          \"SLES15HVM\" : \"ami-005899737135b4201\"\n        },\n        \"ca-central-1\" : {\n          \"AMZNLINUX2\" : \"ami-04c12937e87474def\",\n          \"AMZNLINUX2ARM\" : \"ami-058c397e06e2c3b81\",\n          \"US2004HVM\" : \"ami-04a579d2f00bb4001\",\n          \"CENTOS7HVM\" : \"ami-04a25c39dc7a8aebb\",\n          \"SLES15HVM\" : \"ami-054bc3c58e249d26f\"\n        },\n        \"eu-central-1\" : {\n          \"AMZNLINUX2\" : \"ami-094c442a8e9a67935\",\n          \"AMZNLINUX2ARM\" : \"ami-08600ae8f3553d244\",\n          \"US2004HVM\" : \"ami-06cac34c3836ff90b\",\n          \"CENTOS7HVM\" : \"ami-0e8286b71b81c3cc1\",\n          \"SLES15HVM\" : \"ami-00c80956d89173342\"\n        },\n        \"eu-north-1\" : {\n          \"AMZNLINUX2\" : \"ami-04e8b0e36ed3403dc\",\n          \"AMZNLINUX2ARM\" : \"ami-012b607981f0a40bd\",\n          \"US2004HVM\" : \"ami-0ede84a5f28ec932a\",\n          \"CENTOS7HVM\" : \"ami-05788af9005ef9a93\",\n          \"SLES15HVM\" : \"ami-0c61d9bf4e84dd26a\"\n        },\n        \"eu-south-1\" : {\n          \"AMZNLINUX2\" : \"ami-0432f14b68c3e0273\",\n          \"AMZNLINUX2ARM\" : \"ami-00ec6c30a5816e222\",\n          \"US2004HVM\" : \"ami-0a39f417b8836bc59\",\n          \"CENTOS7HVM\" : \"ami-03014b98e9665115a\",\n          \"SLES15HVM\" : \"ami-0324f5c2cb963f12b\"\n        },\n        \"eu-west-1\" : {\n          \"AMZNLINUX2\" : \"ami-0bba0a4cb75835f71\",\n          \"AMZNLINUX2ARM\" : \"ami-06b4c3e5d2605128e\",\n          \"US2004HVM\" : \"ami-0141514361b6a3c1b\",\n          \"CENTOS7HVM\" : \"ami-0fc585b7cdf48bbb0\",\n          \"SLES15HVM\" : \"ami-0688ec3cb81e58545\"\n        },\n        \"eu-west-2\" : {\n          \"AMZNLINUX2\" : \"ami-030770b178fa9d374\",\n          \"AMZNLINUX2ARM\" : \"ami-0f2913dd376f23830\",\n          \"US2004HVM\" : \"ami-014b642f603e350c3\",\n          \"CENTOS7HVM\" : \"ami-09e5afc68eed60ef4\",\n          \"SLES15HVM\" : \"ami-09dc0d3735677ec06\"\n        },\n        \"eu-west-3\" : {\n          \"AMZNLINUX2\" : \"ami-0614433a16ab15878\",\n          \"AMZNLINUX2ARM\" : \"ami-07a985aa4099754db\",\n          \"US2004HVM\" : \"ami-0d0b8d91779dec1e5\",\n          \"CENTOS7HVM\" : \"ami-0cb72d2e599cffbf9\",\n          \"SLES15HVM\" : \"ami-055d9fcbed9687d9f\"\n        },\n        \"me-south-1\" : {\n          \"AMZNLINUX2\" : \"ami-07a68e42e669daed0\",\n          \"AMZNLINUX2ARM\" : \"ami-015db69a19b15f6f6\",\n          \"US2004HVM\" : \"ami-0c769d841005394ee\",\n          \"CENTOS7HVM\" : \"ami-011c71a894b10f35b\",\n          \"SLES15HVM\" : \"ami-01517fccda7ee908a\"\n        },\n        \"sa-east-1\" : {\n          \"AMZNLINUX2\" : \"ami-0656df2cc0dfd150a\",\n          \"AMZNLINUX2ARM\" : \"ami-0bacea481e0d399f9\",\n          \"US2004HVM\" : \"ami-088afbba294231fe0\",\n          \"CENTOS7HVM\" : \"ami-0b30f38d939dd4b54\",\n          \"SLES15HVM\" : \"ami-0964ddd286e7d4a4f\"\n        },\n        \"us-east-1\" : {\n          \"AMZNLINUX2\" : \"ami-065efef2c739d613b\",\n          \"AMZNLINUX2ARM\" : \"ami-09f0bb50202ca06b0\",\n          \"US2004HVM\" : \"ami-0070c5311b7677678\",\n          \"CENTOS7HVM\" : \"ami-0810ddd646a26b133\",\n          \"SLES15HVM\" : \"ami-08199c714a509d3bc\"\n        },\n        \"us-east-2\" : {\n          \"AMZNLINUX2\" : \"ami-07251f912d2a831a3\",\n          \"AMZNLINUX2ARM\" : \"ami-093dde316d91535f5\",\n          \"US2004HVM\" : \"ami-07f84a50d2dec2fa4\",\n          \"CENTOS7HVM\" : \"ami-01e36b7901e884a10\",\n          \"SLES15HVM\" : \"ami-013d257c3198b3759\"\n        },\n        \"us-west-1\" : {\n          \"AMZNLINUX2\" : \"ami-09b2f6d85764ec71b\",\n          \"AMZNLINUX2ARM\" : \"ami-023670b6c7f24006a\",\n          \"US2004HVM\" : \"ami-040a251ee9d7d1a9b\",\n          \"CENTOS7HVM\" : \"ami-0a2e84f9f7388300f\",\n          \"SLES15HVM\" : \"ami-0d36c27f11154fad6\"\n        },\n        \"us-west-2\" : {\n          \"AMZNLINUX2\" : \"ami-0d08ef957f0e4722b\",\n          \"AMZNLINUX2ARM\" : \"ami-0d3c51ccaa76cbe2b\",\n          \"US2004HVM\" : \"ami-0aab355e1bfa1e72e\",\n          \"CENTOS7HVM\" : \"ami-0bc06212a56393ee1\",\n          \"SLES15HVM\" : \"ami-0bfb58754b8025d15\"\n        },\n        \"us-gov-east-1\" : {\n          \"AMZNLINUX2\" : \"ami-0c371616b3ca56690\",\n          \"AMZNLINUX2ARM\" : \"ami-0b447912d3ca3271c\",\n          \"US2004HVM\" : \"ami-dee008af\",\n          \"CENTOS7HVM\" : \"ami-00e30c71\",\n          \"SLES15HVM\" : \"ami-0c49e39cbc98483b4\"\n        },\n        \"us-gov-west-1\" : {\n          \"AMZNLINUX2\" : \"ami-0456d1223a9a0764a\",\n          \"AMZNLINUX2ARM\" : \"ami-00cf8e7b7f6d21416\",\n          \"US2004HVM\" : \"ami-84556de5\",\n          \"CENTOS7HVM\" : \"ami-bbba86da\",\n          \"SLES15HVM\" : \"ami-0602869f1391f1ba3\"\n        },\n        \"cn-north-1\" : {\n          \"AMZNLINUX2\" : \"ami-06b608ec1cc843660\",\n          \"AMZNLINUX2ARM\" : \"ami-0ff4cb8981f10360d\",\n          \"US2004HVM\" : \"ami-0ee7de898385f3816\",\n          \"CENTOS7HVM\" : \"ami-08c16f7e830c0e393\",\n          \"SLES15HVM\" : \"ami-07563af55cf2eb31d\"\n        },\n        \"cn-northwest-1\" : {\n          \"AMZNLINUX2\" : \"ami-0f0625eb0f9444fd7\",\n          \"AMZNLINUX2ARM\" : \"ami-0846fdff25a81e0fc\",\n          \"US2004HVM\" : \"ami-08e0c0a54f075c9bc\",\n          \"CENTOS7HVM\" : \"ami-0f21aa96a61df8c44\",\n          \"SLES15HVM\" : \"ami-019b04518c072a050\"\n        }\n      },\n      \"LinuxAMINameMap\" : {\n        \"Amazon-Linux2-HVM\" : {\n          \"Code\" : \"AMZNLINUX2\",\n          \"OS\" : \"Amazon\"\n        },\n        \"Amazon-Linux2-HVM-ARM\" : {\n          \"Code\" : \"AMZNLINUX2ARM\",\n          \"OS\" : \"Amazon\"\n        },\n        \"CentOS-7-HVM\" : {\n          \"Code\" : \"CENTOS7HVM\",\n          \"OS\" : \"CentOS\"\n        },\n        \"Ubuntu-Server-18.04-LTS-HVM\" : {\n          \"Code\" : \"US1804HVM\",\n          \"OS\" : \"Ubuntu\"\n        },\n        \"Ubuntu-Server-20.04-LTS-HVM\" : {\n          \"Code\" : \"US2004HVM\",\n          \"OS\" : \"Ubuntu\"\n        },\n        \"SUSE-SLES-15-HVM\" : {\n          \"Code\" : \"SLES15HVM\",\n          \"OS\" : \"SLES\"\n        }\n      }\n    },\n    \"Conditions\" : {\n      \"RolePathProvided\" : {\n        \"Fn::Not\" : [ {\n          \"Fn::Equals\" : [ \"\", {\n            \"Ref\" : \"RolePath\"\n          } ]\n        } ]\n      },\n      \"PermissionsBoundaryProvided\" : {\n        \"Fn::Not\" : [ {\n          \"Fn::Equals\" : [ \"\", {\n            \"Ref\" : \"PermissionsBoundaryArn\"\n          } ]\n        } ]\n      },\n      \"2BastionConditionHost\" : {\n        \"Fn::Or\" : [ {\n          \"Fn::Equals\" : [ {\n            \"Ref\" : \"NumBastionHosts\"\n          }, 2 ]\n        }, {\n          \"Condition\" : \"3BastionCondition\"\n        }, {\n          \"Condition\" : \"4BastionCondition\"\n        } ]\n      },\n      \"3BastionConditionHost\" : {\n        \"Fn::Or\" : [ {\n          \"Fn::Equals\" : [ {\n            \"Ref\" : \"NumBastionHosts\"\n          }, 3 ]\n        }, {\n          \"Condition\" : \"4BastionCondition\"\n        } ]\n      },\n      \"4BastionConditionHost\" : {\n        \"Fn::Equals\" : [ {\n          \"Ref\" : \"NumBastionHosts\"\n        }, 4 ]\n      },\n      \"2BastionCondition\" : {\n        \"Fn::And\" : [ {\n          \"Condition\" : \"PopulateRemoteCIDR\"\n        }, {\n          \"Condition\" : \"2BastionConditionHost\"\n        } ]\n      },\n      \"3BastionCondition\" : {\n        \"Fn::And\" : [ {\n          \"Condition\" : \"PopulateRemoteCIDR\"\n        }, {\n          \"Condition\" : \"3BastionConditionHost\"\n        } ]\n      },\n      \"4BastionCondition\" : {\n        \"Fn::And\" : [ {\n          \"Condition\" : \"PopulateRemoteCIDR\"\n        }, {\n          \"Condition\" : \"4BastionConditionHost\"\n        } ]\n      },\n      \"PopulateRemoteCIDR\" : {\n        \"Fn::Not\" : [ {\n          \"Fn::Equals\" : [ {\n            \"Ref\" : \"RemoteAccessCIDR\"\n          }, \"disabled-onlyssmaccess\" ]\n        } ]\n      },\n      \"UseAlternativeInitialization\" : {\n        \"Fn::Not\" : [ {\n          \"Fn::Equals\" : [ {\n            \"Ref\" : \"AlternativeInitializationScript\"\n          }, \"\" ]\n        } ]\n      },\n      \"CreateIAMRole\" : {\n        \"Fn::Equals\" : [ {\n          \"Ref\" : \"AlternativeIAMRole\"\n        }, \"\" ]\n      },\n      \"UseOSImageOverride\" : {\n        \"Fn::Not\" : [ {\n          \"Fn::Equals\" : [ {\n            \"Ref\" : \"OSImageOverride\"\n          }, \"\" ]\n        } ]\n      },\n      \"UsingDefaultBucket\" : {\n        \"Fn::Equals\" : [ {\n          \"Ref\" : \"QSS3BucketName\"\n        }, \"aws-quickstart\" ]\n      },\n      \"DefaultBanner\" : {\n        \"Fn::Equals\" : [ {\n          \"Ref\" : \"BastionBanner\"\n        }, \"\" ]\n      },\n      \"UseKeyPair\" : {\n        \"Fn::Not\" : [ {\n          \"Fn::Equals\" : [ {\n            \"Ref\" : \"KeyPairName\"\n          }, \"\" ]\n        } ]\n      }\n    },\n    \"Resources\" : {\n      \"BastionMainLogGroup\" : {\n        \"Type\" : \"AWS::Logs::LogGroup\"\n      },\n      \"SSHMetricFilter\" : {\n        \"Type\" : \"AWS::Logs::MetricFilter\",\n        \"Properties\" : {\n          \"LogGroupName\" : {\n            \"Ref\" : \"BastionMainLogGroup\"\n          },\n          \"FilterPattern\" : \"ON FROM USER PWD\",\n          \"MetricTransformations\" : [ {\n            \"MetricName\" : \"SSHCommandCount\",\n            \"MetricValue\" : 1,\n            \"MetricNamespace\" : {\n              \"Fn::Sub\" : \"AWSQuickStart/${AWS::StackName}\"\n            }\n          } ]\n        }\n      },\n      \"BastionHostRole\" : {\n        \"Condition\" : \"CreateIAMRole\",\n        \"Type\" : \"AWS::IAM::Role\",\n        \"Properties\" : {\n          \"Path\" : {\n            \"Fn::If\" : [ \"RolePathProvided\", {\n              \"Ref\" : \"RolePath\"\n            }, {\n              \"Ref\" : \"AWS::NoValue\"\n            } ]\n          },\n          \"PermissionsBoundary\" : {\n            \"Fn::If\" : [ \"PermissionsBoundaryProvided\", {\n              \"Ref\" : \"PermissionsBoundaryArn\"\n            }, {\n              \"Ref\" : \"AWS::NoValue\"\n            } ]\n          },\n          \"AssumeRolePolicyDocument\" : {\n            \"Statement\" : [ {\n              \"Action\" : [ \"sts:AssumeRole\" ],\n              \"Principal\" : {\n                \"Service\" : [ {\n                  \"Fn::Sub\" : \"ec2.${AWS::URLSuffix}\"\n                } ]\n              },\n              \"Effect\" : \"Allow\"\n            } ],\n            \"Version\" : \"2012-10-17\"\n          },\n          \"ManagedPolicyArns\" : [ {\n            \"Fn::Sub\" : \"arn:${AWS::Partition}:iam::aws:policy/AmazonSSMManagedInstanceCore\"\n          }, {\n            \"Fn::Sub\" : \"arn:${AWS::Partition}:iam::aws:policy/CloudWatchAgentServerPolicy\"\n          } ]\n        }\n      },\n      \"BastionHostPolicy\" : {\n        \"Type\" : \"AWS::IAM::Policy\",\n        \"Condition\" : \"CreateIAMRole\",\n        \"Properties\" : {\n          \"PolicyName\" : \"BastionPolicy\",\n          \"PolicyDocument\" : {\n            \"Version\" : \"2012-10-17\",\n            \"Statement\" : [ {\n              \"Action\" : [ \"s3:GetObject\" ],\n              \"Resource\" : {\n                \"Fn::Sub\" : [ \"arn:${AWS::Partition}:s3:::${S3Bucket}/${QSS3KeyPrefix}*\", {\n                  \"S3Bucket\" : {\n                    \"Fn::If\" : [ \"UsingDefaultBucket\", {\n                      \"Fn::Sub\" : \"${QSS3BucketName}-${AWS::Region}\"\n                    }, {\n                      \"Ref\" : \"QSS3BucketName\"\n                    } ]\n                  }\n                } ]\n              },\n              \"Effect\" : \"Allow\"\n            }, {\n              \"Action\" : [ \"logs:CreateLogStream\", \"logs:GetLogEvents\", \"logs:PutLogEvents\", \"logs:DescribeLogGroups\", \"logs:DescribeLogStreams\", \"logs:PutRetentionPolicy\", \"logs:PutMetricFilter\", \"logs:CreateLogGroup\" ],\n              \"Resource\" : {\n                \"Fn::Sub\" : \"arn:${AWS::Partition}:logs:${AWS::Region}:${AWS::AccountId}:log-group:${BastionMainLogGroup}:*\"\n              },\n              \"Effect\" : \"Allow\"\n            }, {\n              \"Action\" : [ \"ec2:DescribeAddresses\" ],\n              \"Resource\" : \"*\",\n              \"Effect\" : \"Allow\"\n            }, {\n              \"Effect\" : \"Allow\",\n              \"Action\" : [ \"ec2:AssociateAddress\" ],\n              \"Resource\" : \"*\",\n              \"Condition\" : {\n                \"StringEquals\" : {\n                  \"ec2:ResourceTag/aws:cloudformation:stack-id\" : {\n                    \"Ref\" : \"AWS::StackId\"\n                  }\n                }\n              }\n            } ]\n          },\n          \"Roles\" : [ {\n            \"Fn::If\" : [ \"CreateIAMRole\", {\n              \"Ref\" : \"BastionHostRole\"\n            }, {\n              \"Ref\" : \"AlternativeIAMRole\"\n            } ]\n          } ]\n        }\n      },\n      \"BastionHostProfile\" : {\n        \"Type\" : \"AWS::IAM::InstanceProfile\",\n        \"Properties\" : {\n          \"Roles\" : [ {\n            \"Fn::If\" : [ \"CreateIAMRole\", {\n              \"Ref\" : \"BastionHostRole\"\n            }, {\n              \"Ref\" : \"AlternativeIAMRole\"\n            } ]\n          } ],\n          \"Path\" : {\n            \"Fn::If\" : [ \"CreateIAMRole\", \"/\", \"/account-managed/\" ]\n          }\n        }\n      },\n      \"EIP1\" : {\n        \"Type\" : \"AWS::EC2::EIP\",\n        \"Condition\" : \"PopulateRemoteCIDR\",\n        \"Properties\" : {\n          \"Domain\" : \"vpc\"\n        }\n      },\n      \"EIP2\" : {\n        \"Type\" : \"AWS::EC2::EIP\",\n        \"Condition\" : \"2BastionCondition\",\n        \"Properties\" : {\n          \"Domain\" : \"vpc\"\n        }\n      },\n      \"EIP3\" : {\n        \"Type\" : \"AWS::EC2::EIP\",\n        \"Condition\" : \"3BastionCondition\",\n        \"Properties\" : {\n          \"Domain\" : \"vpc\"\n        }\n      },\n      \"EIP4\" : {\n        \"Type\" : \"AWS::EC2::EIP\",\n        \"Condition\" : \"4BastionCondition\",\n        \"Properties\" : {\n          \"Domain\" : \"vpc\"\n        }\n      },\n      \"BastionAutoScalingGroup\" : {\n        \"Type\" : \"AWS::AutoScaling::AutoScalingGroup\",\n        \"Properties\" : {\n          \"LaunchConfigurationName\" : {\n            \"Ref\" : \"BastionLaunchConfiguration\"\n          },\n          \"VPCZoneIdentifier\" : [ {\n            \"Ref\" : \"PublicSubnet1ID\"\n          }, {\n            \"Ref\" : \"PublicSubnet2ID\"\n          } ],\n          \"MinSize\" : {\n            \"Ref\" : \"NumBastionHosts\"\n          },\n          \"MaxSize\" : {\n            \"Ref\" : \"NumBastionHosts\"\n          },\n          \"Cooldown\" : 900,\n          \"DesiredCapacity\" : {\n            \"Ref\" : \"NumBastionHosts\"\n          },\n          \"Tags\" : [ {\n            \"Key\" : \"Name\",\n            \"Value\" : {\n              \"Ref\" : \"BastionHostName\"\n            },\n            \"PropagateAtLaunch\" : true\n          } ]\n        },\n        \"CreationPolicy\" : {\n          \"ResourceSignal\" : {\n            \"Count\" : {\n              \"Ref\" : \"NumBastionHosts\"\n            },\n            \"Timeout\" : \"PT60M\"\n          },\n          \"AutoScalingCreationPolicy\" : {\n            \"MinSuccessfulInstancesPercent\" : 100\n          }\n        },\n        \"UpdatePolicy\" : {\n          \"AutoScalingReplacingUpdate\" : {\n            \"WillReplace\" : true\n          }\n        }\n      },\n      \"BastionLaunchConfiguration\" : {\n        \"Type\" : \"AWS::AutoScaling::LaunchConfiguration\",\n        \"Metadata\" : {\n          \"AWS::CloudFormation::Authentication\" : {\n            \"S3AccessCreds\" : {\n              \"type\" : \"S3\",\n              \"roleName\" : {\n                \"Fn::If\" : [ \"CreateIAMRole\", {\n                  \"Ref\" : \"BastionHostRole\"\n                }, {\n                  \"Ref\" : \"AlternativeIAMRole\"\n                } ]\n              },\n              \"buckets\" : [ {\n                \"Fn::If\" : [ \"UsingDefaultBucket\", {\n                  \"Fn::Sub\" : \"${QSS3BucketName}-${AWS::Region}\"\n                }, {\n                  \"Ref\" : \"QSS3BucketName\"\n                } ]\n              } ]\n            }\n          },\n          \"AWS::CloudFormation::Init\" : {\n            \"config\" : {\n              \"files\" : {\n                \"/tmp/auditd.rules\" : {\n                  \"mode\" : 360,\n                  \"owner\" : \"root\",\n                  \"group\" : \"root\",\n                  \"content\" : \"-a exit,always -F arch=b64 -S execve\\n-a exit,always -F arch=b32 -S execve\\n\"\n                },\n                \"/tmp/auditing_configure.sh\" : {\n                  \"source\" : {\n                    \"Fn::Sub\" : [ \"https://${S3Bucket}.s3.${S3Region}.${AWS::URLSuffix}/${QSS3KeyPrefix}scripts/auditing_configure.sh\", {\n                      \"S3Bucket\" : {\n                        \"Fn::If\" : [ \"UsingDefaultBucket\", {\n                          \"Fn::Sub\" : \"aws-quickstart-${AWS::Region}\"\n                        }, {\n                          \"Ref\" : \"QSS3BucketName\"\n                        } ]\n                      },\n                      \"S3Region\" : {\n                        \"Fn::If\" : [ \"UsingDefaultBucket\", {\n                          \"Ref\" : \"AWS::Region\"\n                        }, {\n                          \"Ref\" : \"QSS3BucketRegion\"\n                        } ]\n                      }\n                    } ]\n                  },\n                  \"mode\" : 360,\n                  \"owner\" : \"root\",\n                  \"group\" : \"root\",\n                  \"authentication\" : \"S3AccessCreds\"\n                },\n                \"/tmp/bastion_bootstrap.sh\" : {\n                  \"source\" : {\n                    \"Fn::If\" : [ \"UseAlternativeInitialization\", {\n                      \"Ref\" : \"AlternativeInitializationScript\"\n                    }, {\n                      \"Fn::Sub\" : [ \"https://${S3Bucket}.s3.${S3Region}.${AWS::URLSuffix}/${QSS3KeyPrefix}scripts/bastion_bootstrap.sh\", {\n                        \"S3Bucket\" : {\n                          \"Fn::If\" : [ \"UsingDefaultBucket\", {\n                            \"Fn::Sub\" : \"aws-quickstart-${AWS::Region}\"\n                          }, {\n                            \"Ref\" : \"QSS3BucketName\"\n                          } ]\n                        },\n                        \"S3Region\" : {\n                          \"Fn::If\" : [ \"UsingDefaultBucket\", {\n                            \"Ref\" : \"AWS::Region\"\n                          }, {\n                            \"Ref\" : \"QSS3BucketRegion\"\n                          } ]\n                        }\n                      } ]\n                    } ]\n                  },\n                  \"mode\" : 360,\n                  \"owner\" : \"root\",\n                  \"group\" : \"root\",\n                  \"authentication\" : \"S3AccessCreds\"\n                }\n              },\n              \"commands\" : {\n                \"a-add_auditd_rules\" : {\n                  \"cwd\" : \"/tmp/\",\n                  \"env\" : {\n                    \"BASTION_OS\" : {\n                      \"Fn::FindInMap\" : [ \"LinuxAMINameMap\", {\n                        \"Ref\" : \"BastionAMIOS\"\n                      }, \"OS\" ]\n                    }\n                  },\n                  \"command\" : \"./auditing_configure.sh\"\n                },\n                \"b-bootstrap\" : {\n                  \"cwd\" : \"/tmp/\",\n                  \"env\" : {\n                    \"REGION\" : {\n                      \"Fn::Sub\" : \"${AWS::Region}\"\n                    },\n                    \"URL_SUFFIX\" : {\n                      \"Fn::Sub\" : \"${AWS::URLSuffix}\"\n                    },\n                    \"BANNER_REGION\" : {\n                      \"Fn::If\" : [ \"UsingDefaultBucket\", {\n                        \"Ref\" : \"AWS::Region\"\n                      }, {\n                        \"Ref\" : \"QSS3BucketRegion\"\n                      } ]\n                    }\n                  },\n                  \"command\" : {\n                    \"Fn::Sub\" : [ \"./bastion_bootstrap.sh --banner ${BannerUrl} --enable ${EnableBanner} --tcp-forwarding ${EnableTCPForwarding} --x11-forwarding ${EnableX11Forwarding}\", {\n                      \"BannerUrl\" : {\n                        \"Fn::If\" : [ \"DefaultBanner\", {\n                          \"Fn::Sub\" : [ \"s3://${S3Bucket}/${QSS3KeyPrefix}scripts/banner_message.txt\", {\n                            \"S3Bucket\" : {\n                              \"Fn::If\" : [ \"UsingDefaultBucket\", {\n                                \"Fn::Sub\" : \"aws-quickstart-${AWS::Region}\"\n                              }, {\n                                \"Ref\" : \"QSS3BucketName\"\n                              } ]\n                            }\n                          } ]\n                        }, {\n                          \"Ref\" : \"BastionBanner\"\n                        } ]\n                      }\n                    } ]\n                  }\n                }\n              }\n            }\n          }\n        },\n        \"Properties\" : {\n          \"AssociatePublicIpAddress\" : true,\n          \"PlacementTenancy\" : {\n            \"Ref\" : \"BastionTenancy\"\n          },\n          \"KeyName\" : {\n            \"Fn::If\" : [ \"UseKeyPair\", {\n              \"Ref\" : \"KeyPairName\"\n            }, {\n              \"Ref\" : \"AWS::NoValue\"\n            } ]\n          },\n          \"IamInstanceProfile\" : {\n            \"Ref\" : \"BastionHostProfile\"\n          },\n          \"ImageId\" : {\n            \"Fn::If\" : [ \"UseOSImageOverride\", {\n              \"Ref\" : \"OSImageOverride\"\n            }, {\n              \"Fn::FindInMap\" : [ \"AWSAMIRegionMap\", {\n                \"Ref\" : \"AWS::Region\"\n              }, {\n                \"Fn::FindInMap\" : [ \"LinuxAMINameMap\", {\n                  \"Ref\" : \"BastionAMIOS\"\n                }, \"Code\" ]\n              } ]\n            } ]\n          },\n          \"SecurityGroups\" : [ {\n            \"Ref\" : \"BastionSecurityGroup\"\n          } ],\n          \"InstanceType\" : {\n            \"Ref\" : \"BastionInstanceType\"\n          },\n          \"BlockDeviceMappings\" : [ {\n            \"DeviceName\" : \"/dev/xvda\",\n            \"Ebs\" : {\n              \"VolumeSize\" : {\n                \"Ref\" : \"RootVolumeSize\"\n              },\n              \"VolumeType\" : \"gp2\",\n              \"Encrypted\" : true,\n              \"DeleteOnTermination\" : true\n            }\n          } ],\n          \"UserData\" : {\n            \"Fn::Base64\" : {\n              \"Fn::Sub\" : [ \"#!/bin/bash\\nset -x\\nfor e in $(echo \\\"${EnvironmentVariables}\\\" | tr ',' ' '); do\\n  export $e\\n  echo \\\"$e\\\" >> /root/.bashrc\\ndone\\nexport PATH=$PATH:/usr/local/bin\\n#cfn signaling functions\\nyum install git -y || apt-get install -y git || zypper -n install git\\n\\nfunction cfn_fail\\n{\\n  cfn-signal -e 1 --stack ${AWS::StackName} --region ${AWS::Region} --resource BastionAutoScalingGroup\\n  exit 1\\n}\\n\\nfunction cfn_success\\n{\\n  cfn-signal -e 0 --stack ${AWS::StackName} --region ${AWS::Region} --resource BastionAutoScalingGroup\\n  exit 0\\n}\\n\\nuntil git clone https://github.com/aws-quickstart/quickstart-linux-utilities.git ; do echo \\\"Retrying\\\"; done\\ncd /quickstart-linux-utilities;\\nsource quickstart-cfn-tools.source;\\nqs_update-os || qs_err;\\nqs_bootstrap_pip || qs_err \\\" pip bootstrap failed \\\";\\nqs_aws-cfn-bootstrap || qs_err \\\" cfn bootstrap failed \\\";\\n\\nEIP_LIST=\\\"${EIP1},${EIP2},${EIP3},${EIP4}\\\"\\nCLOUDWATCHGROUP=${BastionMainLogGroup}\\ncfn-init -v --stack '${AWS::StackName}' --resource BastionLaunchConfiguration --region ${AWS::Region} || cfn_fail\\n[ $(qs_status) == 0 ] && cfn_success || cfn_fail\\n\", {\n                \"EIP1\" : {\n                  \"Fn::If\" : [ \"PopulateRemoteCIDR\", {\n                    \"Ref\" : \"EIP1\"\n                  }, \"Null\" ]\n                },\n                \"EIP2\" : {\n                  \"Fn::If\" : [ \"2BastionCondition\", {\n                    \"Ref\" : \"EIP2\"\n                  }, \"Null\" ]\n                },\n                \"EIP3\" : {\n                  \"Fn::If\" : [ \"3BastionCondition\", {\n                    \"Ref\" : \"EIP3\"\n                  }, \"Null\" ]\n                },\n                \"EIP4\" : {\n                  \"Fn::If\" : [ \"4BastionCondition\", {\n                    \"Ref\" : \"EIP4\"\n                  }, \"Null\" ]\n                }\n              } ]\n            }\n          }\n        }\n      },\n      \"BastionSecurityGroup\" : {\n        \"Type\" : \"AWS::EC2::SecurityGroup\",\n        \"Properties\" : {\n          \"GroupDescription\" : \"Enables SSH Access to Bastion Hosts\",\n          \"VpcId\" : {\n            \"Ref\" : \"VPCID\"\n          },\n          \"SecurityGroupIngress\" : {\n            \"Fn::If\" : [ \"PopulateRemoteCIDR\", [ {\n              \"IpProtocol\" : \"tcp\",\n              \"FromPort\" : 22,\n              \"ToPort\" : 22,\n              \"CidrIp\" : {\n                \"Ref\" : \"RemoteAccessCIDR\"\n              }\n            }, {\n              \"IpProtocol\" : \"icmp\",\n              \"FromPort\" : -1,\n              \"ToPort\" : -1,\n              \"CidrIp\" : {\n                \"Ref\" : \"RemoteAccessCIDR\"\n              }\n            } ], {\n              \"Ref\" : \"AWS::NoValue\"\n            } ]\n          }\n        }\n      }\n    },\n    \"Outputs\" : {\n      \"BastionAutoScalingGroup\" : {\n        \"Description\" : \"Auto Scaling group reference ID.\",\n        \"Value\" : {\n          \"Ref\" : \"BastionAutoScalingGroup\"\n        },\n        \"Export\" : {\n          \"Name\" : {\n            \"Fn::Sub\" : \"${AWS::StackName}-BastionAutoScalingGroup\"\n          }\n        }\n      },\n      \"EIP1\" : {\n        \"Condition\" : \"PopulateRemoteCIDR\",\n        \"Description\" : \"Elastic IP 1 for bastion.\",\n        \"Value\" : {\n          \"Ref\" : \"EIP1\"\n        },\n        \"Export\" : {\n          \"Name\" : {\n            \"Fn::Sub\" : \"${AWS::StackName}-EIP1\"\n          }\n        }\n      },\n      \"EIP2\" : {\n        \"Condition\" : \"2BastionCondition\",\n        \"Description\" : \"Elastic IP 2 for bastion.\",\n        \"Value\" : {\n          \"Ref\" : \"EIP2\"\n        },\n        \"Export\" : {\n          \"Name\" : {\n            \"Fn::Sub\" : \"${AWS::StackName}-EIP2\"\n          }\n        }\n      },\n      \"EIP3\" : {\n        \"Condition\" : \"3BastionCondition\",\n        \"Description\" : \"Elastic IP 3 for bastion.\",\n        \"Value\" : {\n          \"Ref\" : \"EIP3\"\n        },\n        \"Export\" : {\n          \"Name\" : {\n            \"Fn::Sub\" : \"${AWS::StackName}-EIP3\"\n          }\n        }\n      },\n      \"EIP4\" : {\n        \"Condition\" : \"4BastionCondition\",\n        \"Description\" : \"Elastic IP 4 for bastion.\",\n        \"Value\" : {\n          \"Ref\" : \"EIP4\"\n        },\n        \"Export\" : {\n          \"Name\" : {\n            \"Fn::Sub\" : \"${AWS::StackName}-EIP4\"\n          }\n        }\n      },\n      \"CloudWatchLogs\" : {\n        \"Description\" : \"CloudWatch Logs GroupName. Your SSH logs will be stored here.\",\n        \"Value\" : {\n          \"Ref\" : \"BastionMainLogGroup\"\n        },\n        \"Export\" : {\n          \"Name\" : {\n            \"Fn::Sub\" : \"${AWS::StackName}-CloudWatchLogs\"\n          }\n        }\n      },\n      \"BastionSecurityGroupID\" : {\n        \"Description\" : \"Bastion security group ID.\",\n        \"Value\" : {\n          \"Ref\" : \"BastionSecurityGroup\"\n        },\n        \"Export\" : {\n          \"Name\" : {\n            \"Fn::Sub\" : \"${AWS::StackName}-BastionSecurityGroupID\"\n          }\n        }\n      },\n      \"BastionHostRole\" : {\n        \"Description\" : \"Bastion IAM role name.\",\n        \"Value\" : {\n          \"Fn::If\" : [ \"CreateIAMRole\", {\n            \"Ref\" : \"BastionHostRole\"\n          }, {\n            \"Ref\" : \"AlternativeIAMRole\"\n          } ]\n        },\n        \"Export\" : {\n          \"Name\" : {\n            \"Fn::Sub\" : \"${AWS::StackName}-BastionHostRole\"\n          }\n        }\n      },\n      \"Postdeployment\" : {\n        \"Description\" : \"See the deployment guide for post-deployment steps.\",\n        \"Value\" : \"https://fwd.aws/YqpXk?\"\n      }\n    }\n  }\n}",
  "CreatedDate": "2022-10-04T16:50:39.403Z",
  "DisplayName": null,
  "DocumentFormat": {
    "Value": "JSON"
  },
  "DocumentType": {
    "Value": "CloudFormation"
  },
  "DocumentVersion": "8",
  "Name": "AWSQuickStarts-LinuxBastion",
  "Requires": [],
  "ReviewStatus": null,
  "Status": {
    "Value": "Active"
  },
  "StatusInformation": null,
  "VersionName": "AWSQuickStarts-LinuxBastion-2022-10-04-16-48-54",
  "ResponseMetadata": {
    "RequestId": "869d9606-470d-4fcc-9913-e82e62cb9ca7",
    "Metadata": {},
    "ChecksumAlgorithm": 0,
    "ChecksumValidationStatus": 0
  },
  "ContentLength": 45127,
  "HttpStatusCode": 200,
  "LoggedAt": "2022-11-11T07:14:56.4148549+00:00"
}
